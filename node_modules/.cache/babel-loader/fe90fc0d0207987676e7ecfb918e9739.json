{"ast":null,"code":"import _slicedToArray from\"/home/ocode/Downloads/Admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from\"react\";import{connect}from\"react-redux\";import{isEmpty}from\"lodash\";import{Button,Card,CardBody,Col,Modal,ModalBody,ModalHeader,Row}from\"reactstrap\";import{AvField,AvForm}from\"availity-reactstrap-validation\";import FullCalendar from\"@fullcalendar/react\";import dayGridPlugin from\"@fullcalendar/daygrid\";import interactionPlugin,{Draggable}from\"@fullcalendar/interaction\";import BootstrapTheme from\"@fullcalendar/bootstrap\";//Import Breadcrumb\nimport Breadcrumbs from\"../../components/Common/Breadcrumb\";import{addNewEvent,deleteEvent,getCategories,getEvents,updateEvent}from\"../../store/actions\";import DeleteModal from\"./DeleteModal\";//css\nimport\"@fullcalendar/bootstrap/main.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Calender=function Calender(props){var events=props.events,categories=props.categories,onGetCategories=props.onGetCategories,onGetEvents=props.onGetEvents;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),modal=_useState2[0],setModal=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),deleteModal=_useState4[0],setDeleteModal=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),modalcategory=_useState6[0],setModalcategory=_useState6[1];var _useState7=useState({}),_useState8=_slicedToArray(_useState7,2),event=_useState8[0],setEvent=_useState8[1];var _useState9=useState(0),_useState10=_slicedToArray(_useState9,2),selectedDay=_useState10[0],setSelectedDay=_useState10[1];var _useState11=useState(false),_useState12=_slicedToArray(_useState11,2),isEdit=_useState12[0],setIsEdit=_useState12[1];useEffect(function(){onGetCategories();onGetEvents();new Draggable(document.getElementById(\"external-events\"),{itemSelector:\".external-event\"});},[onGetCategories,onGetEvents]);/**\n   * Handling the modal state\n   */var toggle=function toggle(){setModal(!modal);if(!modal&&!isEmpty(event)&&!!isEdit){setTimeout(function(){setEvent({});setIsEdit(false);},500);}};var toggleCategory=function toggleCategory(){setModalcategory(!modalcategory);};/**\n   * Handling date click on calendar\n   */var handleDateClick=function handleDateClick(arg){setSelectedDay(arg);toggle();};/**\n   * Handling click on event on calendar\n   */var handleEventClick=function handleEventClick(arg){var event=arg.event;setEvent({id:event.id,title:event.title,title_category:event.title_category,start:event.start,className:event.classNames,category:event.classNames[0],event_category:event.classNames[0]});setIsEdit(true);toggle();};/**\n   * Handling submit event on event form\n   */var handleValidEventSubmit=function handleValidEventSubmit(e,values){var onAddNewEvent=props.onAddNewEvent,onUpdateEvent=props.onUpdateEvent;if(isEdit){var _updateEvent={id:event.id,title:values.title,classNames:values.category+\" text-white\",start:event.start};// update event\nonUpdateEvent(_updateEvent);}else{var newEvent={id:Math.floor(Math.random()*100),title:values[\"title\"],start:selectedDay?selectedDay.date:new Date(),className:values.category+\" text-white\"};// save new event\nonAddNewEvent(newEvent);}setSelectedDay(null);toggle();};var handleValidEventSubmitcategory=function handleValidEventSubmitcategory(event,values){var onAddNewEvent=props.onAddNewEvent;var newEvent={id:Math.floor(Math.random()*100),title:values[\"title_category\"],start:selectedDay?selectedDay.date:new Date(),className:values.event_category+\" text-white\"};// save new event\nonAddNewEvent(newEvent);toggleCategory();};/**\n   * On delete event\n   */var handleDeleteEvent=function handleDeleteEvent(){var onDeleteEvent=props.onDeleteEvent;onDeleteEvent(event);setDeleteModal(false);toggle();};/**\n   * On category darg event\n   */var _onDrag=function onDrag(event){event.preventDefault();};/**\n   * On calendar drop event\n   */var onDrop=function onDrop(event){var onAddNewEvent=props.onAddNewEvent;var draggedEl=event.draggedEl;var newEvent={id:Math.floor(Math.random()*100),title:draggedEl.innerText,start:event.date,className:draggedEl.className};onAddNewEvent(newEvent);};return/*#__PURE__*/_jsxs(React.Fragment,{children:[/*#__PURE__*/_jsx(DeleteModal,{show:deleteModal,onDeleteClick:handleDeleteEvent,onCloseClick:function onCloseClick(){return setDeleteModal(false);}}),/*#__PURE__*/_jsxs(\"div\",{className:\"page-content\",children:[/*#__PURE__*/_jsx(Breadcrumbs,{title:\"Apps\",breadcrumbItem:\"Calendar\"}),/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsxs(Col,{xs:12,children:[/*#__PURE__*/_jsxs(Row,{className:\"mb-4\",children:[/*#__PURE__*/_jsx(Col,{lg:3,children:/*#__PURE__*/_jsx(Card,{className:\"h-100 mb-lg-0\",children:/*#__PURE__*/_jsxs(CardBody,{children:[/*#__PURE__*/_jsxs(Button,{color:\"primary\",className:\"btn font-16 btn-primary w-100\",onClick:toggleCategory,children:[/*#__PURE__*/_jsx(\"i\",{className:\"mdi mdi-plus-circle-outline me-1\"}),\"Create New Event\"]}),/*#__PURE__*/_jsxs(\"div\",{id:\"external-events\",children:[/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"p\",{className:\"text-muted\",children:\"Drag and drop your event or click in the calendar\"}),categories&&categories.map(function(category,i){return/*#__PURE__*/_jsxs(\"div\",{className:\"\".concat(category.type,\" external-event fc-event text-white\"),draggable:true,onDrag:function onDrag(event){return _onDrag(event,category);},children:[/*#__PURE__*/_jsx(\"i\",{className:\"mdi mdi-checkbox-blank-circle font-size-11 me-2\"}),category.title]},\"cat-\"+category.id);})]})]})})}),/*#__PURE__*/_jsx(Col,{className:\"col-lg-9 app-calendar\",children:/*#__PURE__*/_jsx(Card,{className:\"mb-lg-0\",children:/*#__PURE__*/_jsx(CardBody,{children:/*#__PURE__*/_jsx(FullCalendar,{plugins:[BootstrapTheme,dayGridPlugin,interactionPlugin],slotDuration:\"00:15:00\",handleWindowResize:true,themeSystem:\"bootstrap\",headerToolbar:{left:\"prev,next today\",center:\"title\",right:\"dayGridMonth,dayGridWeek,dayGridDay\"},events:events,editable:true,droppable:true,selectable:true,dateClick:handleDateClick,eventClick:handleEventClick,drop:onDrop})})})})]}),/*#__PURE__*/_jsxs(Modal,{isOpen:modal,className:props.className,children:[/*#__PURE__*/_jsx(ModalHeader,{toggle:toggle,tag:\"h4\",children:!!isEdit?\"Edit Event\":\"Add Event\"}),/*#__PURE__*/_jsx(ModalBody,{children:/*#__PURE__*/_jsxs(AvForm,{onValidSubmit:handleValidEventSubmit,children:[/*#__PURE__*/_jsxs(Row,{form:true,children:[/*#__PURE__*/_jsx(Col,{className:\"col-12 mb-3\",children:/*#__PURE__*/_jsx(AvField,{name:\"title\",label:\"Event Name\",type:\"text\",errorMessage:\"Invalid name\",validate:{required:{value:true}},value:event&&event.title?event.title:\"\"})}),/*#__PURE__*/_jsx(Col,{className:\"col-12 mb-3\",children:/*#__PURE__*/_jsxs(AvField,{type:\"select\",name:\"category\",label:\"Select Category\",validate:{required:{value:true}},value:event?event.category:\"bg-primary\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"bg-danger\",children:\"Danger\"}),/*#__PURE__*/_jsx(\"option\",{value:\"bg-success\",children:\"Success\"}),/*#__PURE__*/_jsx(\"option\",{value:\"bg-primary\",children:\"Primary\"}),/*#__PURE__*/_jsx(\"option\",{value:\"bg-info\",children:\"Info\"}),/*#__PURE__*/_jsx(\"option\",{value:\"bg-dark\",children:\"Dark\"}),/*#__PURE__*/_jsx(\"option\",{value:\"bg-warning\",children:\"Warning\"})]})})]}),/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-end\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn btn-light me-2\",onClick:toggle,children:\"Close\"}),!!isEdit&&/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn btn-danger me-2\",onClick:function onClick(){return setDeleteModal(true);},children:\"Delete\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-success save-event\",children:\"Save\"})]})})})]})})]}),/*#__PURE__*/_jsxs(Modal,{isOpen:modalcategory,toggle:toggleCategory,className:props.className,children:[/*#__PURE__*/_jsx(ModalHeader,{toggle:toggleCategory,tag:\"h4\",children:\"Add a category\"}),/*#__PURE__*/_jsx(ModalBody,{children:/*#__PURE__*/_jsxs(AvForm,{onValidSubmit:handleValidEventSubmitcategory,children:[/*#__PURE__*/_jsxs(Row,{form:true,children:[/*#__PURE__*/_jsx(Col,{className:\"col-12 mb-3\",children:/*#__PURE__*/_jsx(AvField,{name:\"title_category\",label:\"Category Name\",type:\"text\",errorMessage:\"Invalid name\",validate:{required:{value:true}},value:event.title_category?event.title_category:\"\"})}),/*#__PURE__*/_jsx(Col,{className:\"col-12 mb-3\",children:/*#__PURE__*/_jsxs(AvField,{type:\"select\",name:\"event_category\",label:\"Choose Category Color\",value:event?event.event_category:\"bg-primary\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"bg-danger\",children:\"Danger\"}),/*#__PURE__*/_jsx(\"option\",{value:\"bg-success\",children:\"Success\"}),/*#__PURE__*/_jsx(\"option\",{value:\"bg-primary\",children:\"Primary\"}),/*#__PURE__*/_jsx(\"option\",{value:\"bg-info\",children:\"Info\"}),/*#__PURE__*/_jsx(\"option\",{value:\"bg-dark\",children:\"Dark\"}),/*#__PURE__*/_jsx(\"option\",{value:\"bg-warning\",children:\"Warning\"})]})})]}),/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-right\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn btn-light me-2\",onClick:toggleCategory,children:\"Close\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-success save-event\",children:\"Save\"})]})})})]})})]})]})})]})]});};var mapStateToProps=function mapStateToProps(_ref){var calendar=_ref.calendar;return{events:calendar.events,categories:calendar.categories,isEventUpdated:calendar.isEventUpdated};};var mapDispatchToProps=function mapDispatchToProps(dispatch){return{onGetEvents:function onGetEvents(){return dispatch(getEvents());},onGetCategories:function onGetCategories(){return dispatch(getCategories());},onAddNewEvent:function onAddNewEvent(event){return dispatch(addNewEvent(event));},onUpdateEvent:function onUpdateEvent(event){return dispatch(updateEvent(event));},onDeleteEvent:function onDeleteEvent(event){return dispatch(deleteEvent(event));}};};export default connect(mapStateToProps,mapDispatchToProps)(Calender);","map":{"version":3,"sources":["/home/ocode/Downloads/Admin/src/pages/Calendar/index.js"],"names":["React","useEffect","useState","connect","isEmpty","Button","Card","CardBody","Col","Modal","ModalBody","ModalHeader","Row","AvField","AvForm","FullCalendar","dayGridPlugin","interactionPlugin","Draggable","BootstrapTheme","Breadcrumbs","addNewEvent","deleteEvent","getCategories","getEvents","updateEvent","DeleteModal","Calender","props","events","categories","onGetCategories","onGetEvents","modal","setModal","deleteModal","setDeleteModal","modalcategory","setModalcategory","event","setEvent","selectedDay","setSelectedDay","isEdit","setIsEdit","document","getElementById","itemSelector","toggle","setTimeout","toggleCategory","handleDateClick","arg","handleEventClick","id","title","title_category","start","className","classNames","category","event_category","handleValidEventSubmit","e","values","onAddNewEvent","onUpdateEvent","newEvent","Math","floor","random","date","Date","handleValidEventSubmitcategory","handleDeleteEvent","onDeleteEvent","onDrag","preventDefault","onDrop","draggedEl","innerText","map","i","type","left","center","right","required","value","mapStateToProps","calendar","isEventUpdated","mapDispatchToProps","dispatch"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\"\nimport PropTypes from \"prop-types\"\nimport { connect } from \"react-redux\"\nimport { isEmpty } from \"lodash\"\nimport {\n  Button,\n  Card,\n  CardBody,\n  Col,\n  Modal,\n  ModalBody,\n  ModalHeader,\n  Row,\n} from \"reactstrap\"\nimport { AvField, AvForm } from \"availity-reactstrap-validation\"\nimport FullCalendar from \"@fullcalendar/react\"\nimport dayGridPlugin from \"@fullcalendar/daygrid\"\nimport interactionPlugin, { Draggable } from \"@fullcalendar/interaction\"\nimport BootstrapTheme from \"@fullcalendar/bootstrap\"\n//Import Breadcrumb\nimport Breadcrumbs from \"../../components/Common/Breadcrumb\"\nimport {\n  addNewEvent,\n  deleteEvent,\n  getCategories,\n  getEvents,\n  updateEvent,\n} from \"../../store/actions\"\nimport DeleteModal from \"./DeleteModal\"\n//css\nimport \"@fullcalendar/bootstrap/main.css\"\nconst Calender = props => {\n  const { events, categories, onGetCategories, onGetEvents } = props\n  const [modal, setModal] = useState(false)\n  const [deleteModal, setDeleteModal] = useState(false)\n  const [modalcategory, setModalcategory] = useState(false)\n  const [event, setEvent] = useState({})\n  const [selectedDay, setSelectedDay] = useState(0)\n  const [isEdit, setIsEdit] = useState(false)\n  useEffect(() => {\n    onGetCategories()\n    onGetEvents()\n    new Draggable(document.getElementById(\"external-events\"), {\n      itemSelector: \".external-event\",\n    })\n  }, [onGetCategories, onGetEvents]);\n  /**\n   * Handling the modal state\n   */\n  const toggle = () => {\n    setModal(!modal)\n    if (!modal && !isEmpty(event) && !!isEdit) {\n      setTimeout(() => {\n        setEvent({})\n        setIsEdit(false)\n      }, 500)\n    }\n  }\n  const toggleCategory = () => {\n    setModalcategory(!modalcategory)\n  }\n  /**\n   * Handling date click on calendar\n   */\n  const handleDateClick = arg => {\n    setSelectedDay(arg)\n    toggle()\n  }\n  /**\n   * Handling click on event on calendar\n   */\n  const handleEventClick = arg => {\n    const event = arg.event\n    setEvent({\n      id: event.id,\n      title: event.title,\n      title_category: event.title_category,\n      start: event.start,\n      className: event.classNames,\n      category: event.classNames[0],\n      event_category: event.classNames[0],\n    })\n    setIsEdit(true)\n    toggle()\n  }\n  /**\n   * Handling submit event on event form\n   */\n  const handleValidEventSubmit = (e, values) => {\n    const { onAddNewEvent, onUpdateEvent } = props\n    if (isEdit) {\n      const updateEvent = {\n        id: event.id,\n        title: values.title,\n        classNames: values.category + \" text-white\",\n        start: event.start,\n      }\n      // update event\n      onUpdateEvent(updateEvent)\n    } else {\n      const newEvent = {\n        id: Math.floor(Math.random() * 100),\n        title: values[\"title\"],\n        start: selectedDay ? selectedDay.date : new Date(),\n        className: values.category + \" text-white\",\n      }\n      // save new event\n      onAddNewEvent(newEvent)\n    }\n    setSelectedDay(null)\n    toggle()\n  }\n  const handleValidEventSubmitcategory = (event, values) => {\n    const { onAddNewEvent } = props\n    const newEvent = {\n      id: Math.floor(Math.random() * 100),\n      title: values[\"title_category\"],\n      start: selectedDay ? selectedDay.date : new Date(),\n      className: values.event_category + \" text-white\",\n    }\n    // save new event\n    onAddNewEvent(newEvent)\n    toggleCategory()\n  }\n  /**\n   * On delete event\n   */\n  const handleDeleteEvent = () => {\n    const { onDeleteEvent } = props\n    onDeleteEvent(event)\n    setDeleteModal(false)\n    toggle()\n  }\n  /**\n   * On category darg event\n   */\n  const onDrag = (event) => {\n    event.preventDefault()\n  }\n  /**\n   * On calendar drop event\n   */\n  const onDrop = event => {\n    const { onAddNewEvent } = props\n    const draggedEl = event.draggedEl\n    const newEvent = {\n      id: Math.floor(Math.random() * 100),\n      title: draggedEl.innerText,\n      start: event.date,\n      className: draggedEl.className,\n    }\n    onAddNewEvent(newEvent)\n  }\n\n  return (\n    <React.Fragment>\n      <DeleteModal\n        show={deleteModal}\n        onDeleteClick={handleDeleteEvent}\n        onCloseClick={() => setDeleteModal(false)}\n      />\n      <div className=\"page-content\">\n\n          {/* Render Breadcrumb */}\n          <Breadcrumbs title=\"Apps\" breadcrumbItem=\"Calendar\" />\n          <Row>\n            <Col xs={12}>\n              <Row className=\"mb-4\">\n                <Col lg={3}>\n                  <Card className=\"h-100 mb-lg-0\">\n                    <CardBody>\n                      <Button\n                        color=\"primary\"\n                        className=\"btn font-16 btn-primary w-100\"\n                        onClick={toggleCategory}\n                      >\n                        <i className=\"mdi mdi-plus-circle-outline me-1\" />\n                        Create New Event\n                      </Button>\n                      <div id=\"external-events\">\n                        <br />\n                        <p className=\"text-muted\">\n                          Drag and drop your event or click in the calendar\n                        </p>\n                        {categories &&\n                          categories.map((category, i) => (\n                            <div\n                              className={`${category.type} external-event fc-event text-white`}\n                              key={\"cat-\" + category.id}\n                              draggable\n                              onDrag={event => onDrag(event, category)}\n                            >\n                              <i className=\"mdi mdi-checkbox-blank-circle font-size-11 me-2\" />\n                              {category.title}\n                            </div>\n                          ))}\n                      </div>\n                    </CardBody>\n                  </Card>\n                </Col>\n                <Col className=\"col-lg-9 app-calendar\">\n                  <Card className=\"mb-lg-0\">\n                    <CardBody>\n                      <FullCalendar\n                        plugins={[\n                          BootstrapTheme,\n                          dayGridPlugin,\n                          interactionPlugin,\n                        ]}\n                        slotDuration={\"00:15:00\"}\n                        handleWindowResize={true}\n                        themeSystem=\"bootstrap\"\n                        headerToolbar={{\n                          left: \"prev,next today\",\n                          center: \"title\",\n                          right: \"dayGridMonth,dayGridWeek,dayGridDay\",\n                        }}\n                        events={events}\n                        editable={true}\n                        droppable={true}\n                        selectable={true}\n                        dateClick={handleDateClick}\n                        eventClick={handleEventClick}\n                        drop={onDrop}\n                      />\n                    </CardBody>\n                  </Card>\n                </Col>\n              </Row>\n              {/* New/Edit event modal */}\n              <Modal isOpen={modal} className={props.className}>\n                <ModalHeader toggle={toggle} tag=\"h4\">\n                  {!!isEdit ? \"Edit Event\" : \"Add Event\"}\n                </ModalHeader>\n                <ModalBody>\n                  <AvForm onValidSubmit={handleValidEventSubmit}>\n                    <Row form>\n                      <Col className=\"col-12 mb-3\">\n                        <AvField\n                          name=\"title\"\n                          label=\"Event Name\"\n                          type=\"text\"\n                          errorMessage=\"Invalid name\"\n                          validate={{\n                            required: { value: true },\n                          }}\n                          value={(event && event.title) ? event.title : \"\"}\n                        />\n                      </Col>\n                      <Col className=\"col-12 mb-3\">\n                        <AvField\n                          type=\"select\"\n                          name=\"category\"\n                          label=\"Select Category\"\n                          validate={{\n                            required: { value: true },\n                          }}\n                          value={event ? event.category : \"bg-primary\"}\n                        >\n                          <option value=\"bg-danger\">Danger</option>\n                          <option value=\"bg-success\">Success</option>\n                          <option value=\"bg-primary\">Primary</option>\n                          <option value=\"bg-info\">Info</option>\n                          <option value=\"bg-dark\">Dark</option>\n                          <option value=\"bg-warning\">Warning</option>\n                        </AvField>\n                      </Col>\n                    </Row>\n                    <Row>\n                      <Col>\n                        <div className=\"text-end\">\n                          <button\n                            type=\"button\"\n                            className=\"btn btn-light me-2\"\n                            onClick={toggle}\n                          >\n                            Close\n                                  </button>\n                          {!!isEdit && (\n                            <button\n                              type=\"button\"\n                              className=\"btn btn-danger me-2\"\n                              onClick={() => setDeleteModal(true)}\n                            >\n                              Delete\n                            </button>\n                          )}\n                          <button\n                            type=\"submit\"\n                            className=\"btn btn-success save-event\"\n                          >\n                            Save\n                            </button>\n                        </div>\n                      </Col>\n                    </Row>\n                  </AvForm>\n                </ModalBody>\n              </Modal>\n              <Modal\n                isOpen={modalcategory}\n                toggle={toggleCategory}\n                className={props.className}\n              >\n                <ModalHeader toggle={toggleCategory} tag=\"h4\">\n                  Add a category\n                        </ModalHeader>\n                <ModalBody>\n                  <AvForm\n                    onValidSubmit={handleValidEventSubmitcategory}\n                  >\n                    <Row form>\n                      <Col className=\"col-12 mb-3\">\n                        <AvField\n                          name=\"title_category\"\n                          label=\"Category Name\"\n                          type=\"text\"\n                          errorMessage=\"Invalid name\"\n                          validate={{\n                            required: { value: true },\n                          }}\n                          value={\n                            event.title_category\n                              ? event.title_category\n                              : \"\"\n                          }\n                        />\n                      </Col>\n                      <Col className=\"col-12 mb-3\">\n                        <AvField\n                          type=\"select\"\n                          name=\"event_category\"\n                          label=\"Choose Category Color\"\n                          value={\n                            event ? event.event_category : \"bg-primary\"\n                          }\n                        >\n                          <option value=\"bg-danger\">Danger</option>\n                          <option value=\"bg-success\">Success</option>\n                          <option value=\"bg-primary\">Primary</option>\n                          <option value=\"bg-info\">Info</option>\n                          <option value=\"bg-dark\">Dark</option>\n                          <option value=\"bg-warning\">Warning</option>\n                        </AvField>\n                      </Col>\n                    </Row>\n                    <Row>\n                      <Col>\n                        <div className=\"text-right\">\n                          <button\n                            type=\"button\"\n                            className=\"btn btn-light me-2\"\n                            onClick={toggleCategory}\n                          >\n                            Close\n                                  </button>\n                          <button\n                            type=\"submit\"\n                            className=\"btn btn-success save-event\"\n                          >\n                            Save\n                                  </button>\n                        </div>\n                      </Col>\n                    </Row>\n                  </AvForm>\n                </ModalBody>\n              </Modal>\n            </Col>\n          </Row>\n      </div>\n    </React.Fragment>\n  )\n}\nCalender.propTypes = {\n  events: PropTypes.array,\n  categories: PropTypes.array,\n  className: PropTypes.string,\n  onGetEvents: PropTypes.func,\n  onAddNewEvent: PropTypes.func,\n  onUpdateEvent: PropTypes.func,\n  onDeleteEvent: PropTypes.func,\n  onGetCategories: PropTypes.func,\n}\nconst mapStateToProps = ({ calendar }) => ({\n  events: calendar.events,\n  categories: calendar.categories,\n  isEventUpdated: calendar.isEventUpdated\n})\nconst mapDispatchToProps = dispatch => ({\n  onGetEvents: () => dispatch(getEvents()),\n  onGetCategories: () => dispatch(getCategories()),\n  onAddNewEvent: event => dispatch(addNewEvent(event)),\n  onUpdateEvent: event => dispatch(updateEvent(event)),\n  onDeleteEvent: event => dispatch(deleteEvent(event)),\n})\nexport default connect(mapStateToProps, mapDispatchToProps)(Calender)"]},"metadata":{},"sourceType":"module"}