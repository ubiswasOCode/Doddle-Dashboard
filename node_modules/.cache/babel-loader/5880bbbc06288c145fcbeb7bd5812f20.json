{"ast":null,"code":"var _jsxFileName = \"/home/ocode-2023/Desktop/Dashboard/Admin/src/pages/AllCharts/knob/knob.js\";\nimport React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass Knob extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.getArcToValue = v => {\n      let startAngle;\n      let endAngle;\n      const angle = !this.props.log ? (v - this.props.min) * this.angleArc / (this.props.max - this.props.min) : Math.log(Math.pow(v / this.props.min, this.angleArc)) / Math.log(this.props.max / this.props.min);\n\n      if (!this.props.clockwise) {\n        startAngle = this.endAngle + 0.00001;\n        endAngle = startAngle - angle - 0.00001;\n      } else {\n        startAngle = this.startAngle - 0.00001;\n        endAngle = startAngle + angle + 0.00001;\n      }\n\n      if (this.props.cursor) {\n        startAngle = endAngle - this.cursorExt;\n        endAngle += this.cursorExt;\n      }\n\n      return {\n        startAngle,\n        endAngle,\n        acw: !this.props.clockwise && !this.props.cursor\n      };\n    };\n\n    this.getCanvasScale = ctx => {\n      const devicePixelRatio = window.devicePixelRatio || window.screen.deviceXDPI / window.screen.logicalXDPI || // IE10\n      1;\n      const backingStoreRatio = ctx.webkitBackingStorePixelRatio || 1;\n      return devicePixelRatio / backingStoreRatio;\n    };\n\n    this.coerceToStep = v => {\n      let val = !this.props.log ? ~~((v < 0 ? -0.5 : 0.5) + v / this.props.step) * this.props.step : Math.pow(this.props.step, ~~((Math.abs(v) < 1 ? -0.5 : 0.5) + Math.log(v) / Math.log(this.props.step)));\n      val = Math.max(Math.min(val, this.props.max), this.props.min);\n\n      if (isNaN(val)) {\n        val = 0;\n      }\n\n      return Math.round(val * 1000) / 1000;\n    };\n\n    this.eventToValue = e => {\n      const bounds = this.canvasRef.getBoundingClientRect();\n      const x = e.clientX - bounds.left;\n      const y = e.clientY - bounds.top;\n      let a = Math.atan2(x - this.w / 2, this.w / 2 - y) - this.angleOffset;\n\n      if (!this.props.clockwise) {\n        a = this.angleArc - a - 2 * Math.PI;\n      }\n\n      if (this.angleArc !== Math.PI * 2 && a < 0 && a > -0.5) {\n        a = 0;\n      } else if (a < 0) {\n        a += Math.PI * 2;\n      }\n\n      const val = !this.props.log ? a * (this.props.max - this.props.min) / this.angleArc + this.props.min : Math.pow(this.props.max / this.props.min, a / this.angleArc) * this.props.min;\n      return this.coerceToStep(val);\n    };\n\n    this.handleMouseDown = e => {\n      this.props.onChange(this.eventToValue(e));\n      document.addEventListener(\"mousemove\", this.handleMouseMove);\n      document.addEventListener(\"mouseup\", this.handleMouseUp);\n      document.addEventListener(\"keyup\", this.handleEsc);\n    };\n\n    this.handleMouseMove = e => {\n      e.preventDefault();\n      this.props.onChange(this.eventToValue(e));\n    };\n\n    this.handleMouseUp = e => {\n      this.props.onChangeEnd(this.eventToValue(e));\n      document.removeEventListener(\"mousemove\", this.handleMouseMove);\n      document.removeEventListener(\"mouseup\", this.handleMouseUp);\n      document.removeEventListener(\"keyup\", this.handleEsc);\n    };\n\n    this.handleTouchStart = e => {\n      e.preventDefault();\n      this.touchIndex = e.targetTouches.length - 1;\n      this.props.onChange(this.eventToValue(e.targetTouches[this.touchIndex]));\n      document.addEventListener(\"touchmove\", this.handleTouchMove, {\n        passive: false\n      });\n      document.addEventListener(\"touchend\", this.handleTouchEnd);\n      document.addEventListener(\"touchcancel\", this.handleTouchEnd);\n    };\n\n    this.handleTouchMove = e => {\n      e.preventDefault();\n      this.props.onChange(this.eventToValue(e.targetTouches[this.touchIndex]));\n    };\n\n    this.handleTouchEnd = e => {\n      this.props.onChangeEnd(this.eventToValue(e));\n      document.removeEventListener(\"touchmove\", this.handleTouchMove);\n      document.removeEventListener(\"touchend\", this.handleTouchEnd);\n      document.removeEventListener(\"touchcancel\", this.handleTouchEnd);\n    };\n\n    this.handleEsc = e => {\n      if (e.keyCode === 27) {\n        e.preventDefault();\n        this.handleMouseUp();\n      }\n    };\n\n    this.handleTextInput = e => {\n      const val = Math.max(Math.min(+e.target.value, this.props.max), this.props.min) || this.props.min;\n      this.props.onChange(val);\n    };\n\n    this.handleWheel = e => {\n      if (e.deltaX > 0 || e.deltaY > 0) {\n        this.props.onChange(this.coerceToStep(!this.props.log ? this.props.value + this.props.step : this.props.value * this.props.step));\n      } else if (e.deltaX < 0 || e.deltaY < 0) {\n        this.props.onChange(this.coerceToStep(!this.props.log ? this.props.value - this.props.step : this.props.value / this.props.step));\n      }\n    };\n\n    this.handleArrowKey = e => {\n      if (e.keyCode === 37 || e.keyCode === 40) {\n        e.preventDefault();\n        this.props.onChange(this.coerceToStep(!this.props.log ? this.props.value - this.props.step : this.props.value / this.props.step));\n      } else if (e.keyCode === 38 || e.keyCode === 39) {\n        e.preventDefault();\n        this.props.onChange(this.coerceToStep(!this.props.log ? this.props.value + this.props.step : this.props.value * this.props.step));\n      }\n    };\n\n    this.inputStyle = () => ({\n      width: `${this.w / 2 + 4 >> 0}px`,\n      height: `${this.w / 3 >> 0}px`,\n      position: \"absolute\",\n      verticalAlign: \"middle\",\n      marginTop: `${this.w / 3 >> 0}px`,\n      marginLeft: `-${this.w * 3 / 4 + 2 >> 0}px`,\n      border: 0,\n      background: \"none\",\n      font: `${this.props.fontWeight} ${this.w / this.digits >> 0}px ${this.props.font}`,\n      textAlign: \"center\",\n      color: this.props.inputColor || this.props.fgColor,\n      padding: \"0px\",\n      WebkitAppearance: \"none\"\n    });\n\n    this.renderCenter = () => {\n      const {\n        displayCustom,\n        displayInput,\n        disableTextInput,\n        readOnly,\n        value\n      } = this.props;\n\n      if (displayInput) {\n        return /*#__PURE__*/_jsxDEV(\"input\", {\n          style: this.inputStyle(),\n          type: \"text\",\n          value: value,\n          onChange: this.handleTextInput,\n          onKeyDown: this.handleArrowKey,\n          readOnly: readOnly || disableTextInput\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 339,\n          columnNumber: 9\n        }, this);\n      } else if (displayCustom && typeof displayCustom === \"function\") {\n        return displayCustom();\n      }\n\n      return null;\n    };\n\n    this.w = this.props.width || 200;\n    this.h = this.props.height || this.w;\n    this.cursorExt = this.props.cursor === true ? 0.3 : this.props.cursor / 100;\n    this.angleArc = this.props.angleArc * Math.PI / 180;\n    this.angleOffset = this.props.angleOffset * Math.PI / 180;\n    this.startAngle = 1.5 * Math.PI + this.angleOffset;\n    this.endAngle = 1.5 * Math.PI + this.angleOffset + this.angleArc;\n    this.digits = Math.max(String(Math.abs(this.props.min)).length, String(Math.abs(this.props.max)).length, 2) + 2;\n  }\n\n  componentDidMount() {\n    this.drawCanvas();\n\n    if (!this.props.readOnly) {\n      this.canvasRef.addEventListener(\"touchstart\", this.handleTouchStart, {\n        passive: false\n      });\n    }\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (nextProps.width && this.w !== nextProps.width) {\n      this.w = nextProps.width;\n    }\n\n    if (nextProps.height && this.h !== nextProps.height) {\n      this.h = nextProps.height;\n    }\n  }\n\n  componentDidUpdate() {\n    this.drawCanvas();\n  }\n\n  componentWillUnmount() {\n    this.canvasRef.removeEventListener(\"touchstart\", this.handleTouchStart);\n  }\n\n  drawCanvas() {\n    const ctx = this.canvasRef.getContext(\"2d\");\n    const scale = this.getCanvasScale(ctx);\n    this.canvasRef.width = this.w * scale; // clears the canvas\n\n    this.canvasRef.height = this.h * scale;\n    ctx.scale(scale, scale);\n    this.xy = this.w / 2; // coordinates of canvas center\n\n    this.lineWidth = this.xy * this.props.thickness;\n    this.radius = this.xy - this.lineWidth / 2;\n    ctx.lineWidth = this.lineWidth;\n    ctx.lineCap = this.props.lineCap; // background arc\n\n    ctx.beginPath();\n    ctx.strokeStyle = this.props.bgColor;\n    ctx.arc(this.xy, this.xy, this.radius, this.endAngle - 0.00001, this.startAngle + 0.00001, true);\n    ctx.stroke(); // foreground arc\n\n    const a = this.getArcToValue(this.props.value);\n    ctx.beginPath();\n    ctx.strokeStyle = this.props.fgColor;\n    ctx.arc(this.xy, this.xy, this.radius, a.startAngle, a.endAngle, a.acw);\n    ctx.stroke();\n  }\n\n  render() {\n    const {\n      canvasClassName,\n      className,\n      disableMouseWheel,\n      readOnly,\n      title,\n      value\n    } = this.props;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: className,\n      style: {\n        width: this.w,\n        height: this.h,\n        display: \"inline-block\"\n      },\n      onWheel: readOnly || disableMouseWheel ? null : this.handleWheel,\n      children: [/*#__PURE__*/_jsxDEV(\"canvas\", {\n        ref: ref => {\n          this.canvasRef = ref;\n        },\n        className: canvasClassName,\n        style: {\n          width: \"100%\",\n          height: \"100%\"\n        },\n        onMouseDown: readOnly ? null : this.handleMouseDown,\n        title: title ? `${title}: ${value}` : value\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 370,\n        columnNumber: 9\n      }, this), this.renderCenter()]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 365,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nKnob.propTypes = {\n  value: PropTypes.number.isRequired,\n  onChange: PropTypes.func.isRequired,\n  onChangeEnd: PropTypes.func,\n  min: PropTypes.number,\n  max: PropTypes.number,\n  step: PropTypes.number,\n  log: PropTypes.bool,\n  width: PropTypes.number,\n  height: PropTypes.number,\n  thickness: PropTypes.number,\n  lineCap: PropTypes.oneOf([\"butt\", \"round\"]),\n  bgColor: PropTypes.string,\n  fgColor: PropTypes.string,\n  inputColor: PropTypes.string,\n  font: PropTypes.string,\n  fontWeight: PropTypes.string,\n  clockwise: PropTypes.bool,\n  cursor: PropTypes.oneOfType([PropTypes.number, PropTypes.bool]),\n  stopper: PropTypes.bool,\n  readOnly: PropTypes.bool,\n  disableTextInput: PropTypes.bool,\n  displayInput: PropTypes.bool,\n  displayCustom: PropTypes.func,\n  angleArc: PropTypes.number,\n  angleOffset: PropTypes.number,\n  disableMouseWheel: PropTypes.bool,\n  title: PropTypes.string,\n  className: PropTypes.string,\n  canvasClassName: PropTypes.string\n};\nKnob.defaultProps = {\n  onChangeEnd: () => {},\n  min: 0,\n  max: 100,\n  step: 1,\n  log: false,\n  width: 200,\n  height: 200,\n  thickness: 0.35,\n  lineCap: \"butt\",\n  bgColor: \"#EEE\",\n  fgColor: \"#EA2\",\n  inputColor: \"\",\n  font: \"Arial\",\n  fontWeight: \"bold\",\n  clockwise: true,\n  cursor: false,\n  stopper: true,\n  readOnly: false,\n  disableTextInput: false,\n  displayInput: true,\n  angleArc: 360,\n  angleOffset: 0,\n  disableMouseWheel: false,\n  className: null,\n  canvasClassName: null\n};\nexport default Knob;","map":{"version":3,"sources":["/home/ocode-2023/Desktop/Dashboard/Admin/src/pages/AllCharts/knob/knob.js"],"names":["React","PropTypes","Knob","Component","constructor","props","getArcToValue","v","startAngle","endAngle","angle","log","min","angleArc","max","Math","pow","clockwise","cursor","cursorExt","acw","getCanvasScale","ctx","devicePixelRatio","window","screen","deviceXDPI","logicalXDPI","backingStoreRatio","webkitBackingStorePixelRatio","coerceToStep","val","step","abs","isNaN","round","eventToValue","e","bounds","canvasRef","getBoundingClientRect","x","clientX","left","y","clientY","top","a","atan2","w","angleOffset","PI","handleMouseDown","onChange","document","addEventListener","handleMouseMove","handleMouseUp","handleEsc","preventDefault","onChangeEnd","removeEventListener","handleTouchStart","touchIndex","targetTouches","length","handleTouchMove","passive","handleTouchEnd","keyCode","handleTextInput","target","value","handleWheel","deltaX","deltaY","handleArrowKey","inputStyle","width","height","position","verticalAlign","marginTop","marginLeft","border","background","font","fontWeight","digits","textAlign","color","inputColor","fgColor","padding","WebkitAppearance","renderCenter","displayCustom","displayInput","disableTextInput","readOnly","h","String","componentDidMount","drawCanvas","componentWillReceiveProps","nextProps","componentDidUpdate","componentWillUnmount","getContext","scale","xy","lineWidth","thickness","radius","lineCap","beginPath","strokeStyle","bgColor","arc","stroke","render","canvasClassName","className","disableMouseWheel","title","display","ref","propTypes","number","isRequired","func","bool","oneOf","string","oneOfType","stopper","defaultProps"],"mappings":"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","sourcesContent":["import React from \"react\"\nimport PropTypes from \"prop-types\"\n\nclass Knob extends React.Component {\n  static propTypes = {\n    value: PropTypes.number.isRequired,\n    onChange: PropTypes.func.isRequired,\n    onChangeEnd: PropTypes.func,\n    min: PropTypes.number,\n    max: PropTypes.number,\n    step: PropTypes.number,\n    log: PropTypes.bool,\n    width: PropTypes.number,\n    height: PropTypes.number,\n    thickness: PropTypes.number,\n    lineCap: PropTypes.oneOf([\"butt\", \"round\"]),\n    bgColor: PropTypes.string,\n    fgColor: PropTypes.string,\n    inputColor: PropTypes.string,\n    font: PropTypes.string,\n    fontWeight: PropTypes.string,\n    clockwise: PropTypes.bool,\n    cursor: PropTypes.oneOfType([PropTypes.number, PropTypes.bool]),\n    stopper: PropTypes.bool,\n    readOnly: PropTypes.bool,\n    disableTextInput: PropTypes.bool,\n    displayInput: PropTypes.bool,\n    displayCustom: PropTypes.func,\n    angleArc: PropTypes.number,\n    angleOffset: PropTypes.number,\n    disableMouseWheel: PropTypes.bool,\n    title: PropTypes.string,\n    className: PropTypes.string,\n    canvasClassName: PropTypes.string,\n  }\n\n  static defaultProps = {\n    onChangeEnd: () => {},\n    min: 0,\n    max: 100,\n    step: 1,\n    log: false,\n    width: 200,\n    height: 200,\n    thickness: 0.35,\n    lineCap: \"butt\",\n    bgColor: \"#EEE\",\n    fgColor: \"#EA2\",\n    inputColor: \"\",\n    font: \"Arial\",\n    fontWeight: \"bold\",\n    clockwise: true,\n    cursor: false,\n    stopper: true,\n    readOnly: false,\n    disableTextInput: false,\n    displayInput: true,\n    angleArc: 360,\n    angleOffset: 0,\n    disableMouseWheel: false,\n    className: null,\n    canvasClassName: null,\n  }\n\n  constructor(props) {\n    super(props)\n    this.w = this.props.width || 200\n    this.h = this.props.height || this.w\n    this.cursorExt = this.props.cursor === true ? 0.3 : this.props.cursor / 100\n    this.angleArc = (this.props.angleArc * Math.PI) / 180\n    this.angleOffset = (this.props.angleOffset * Math.PI) / 180\n    this.startAngle = 1.5 * Math.PI + this.angleOffset\n    this.endAngle = 1.5 * Math.PI + this.angleOffset + this.angleArc\n    this.digits =\n      Math.max(\n        String(Math.abs(this.props.min)).length,\n        String(Math.abs(this.props.max)).length,\n        2\n      ) + 2\n  }\n\n  componentDidMount() {\n    this.drawCanvas()\n    if (!this.props.readOnly) {\n      this.canvasRef.addEventListener(\"touchstart\", this.handleTouchStart, {\n        passive: false,\n      })\n    }\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (nextProps.width && this.w !== nextProps.width) {\n      this.w = nextProps.width\n    }\n    if (nextProps.height && this.h !== nextProps.height) {\n      this.h = nextProps.height\n    }\n  }\n\n  componentDidUpdate() {\n    this.drawCanvas()\n  }\n\n  componentWillUnmount() {\n    this.canvasRef.removeEventListener(\"touchstart\", this.handleTouchStart)\n  }\n\n  getArcToValue = v => {\n    let startAngle\n    let endAngle\n    const angle = !this.props.log\n      ? ((v - this.props.min) * this.angleArc) /\n        (this.props.max - this.props.min)\n      : Math.log(Math.pow(v / this.props.min, this.angleArc)) /\n        Math.log(this.props.max / this.props.min)\n    if (!this.props.clockwise) {\n      startAngle = this.endAngle + 0.00001\n      endAngle = startAngle - angle - 0.00001\n    } else {\n      startAngle = this.startAngle - 0.00001\n      endAngle = startAngle + angle + 0.00001\n    }\n    if (this.props.cursor) {\n      startAngle = endAngle - this.cursorExt\n      endAngle += this.cursorExt\n    }\n    return {\n      startAngle,\n      endAngle,\n      acw: !this.props.clockwise && !this.props.cursor,\n    }\n  }\n\n  // Calculate ratio to scale canvas to avoid blurriness on HiDPI devices\n  getCanvasScale = ctx => {\n    const devicePixelRatio =\n      window.devicePixelRatio ||\n      window.screen.deviceXDPI / window.screen.logicalXDPI || // IE10\n      1\n    const backingStoreRatio = ctx.webkitBackingStorePixelRatio || 1\n    return devicePixelRatio / backingStoreRatio\n  }\n\n  coerceToStep = v => {\n    let val = !this.props.log\n      ? ~~((v < 0 ? -0.5 : 0.5) + v / this.props.step) * this.props.step\n      : Math.pow(\n          this.props.step,\n          ~~(\n            (Math.abs(v) < 1 ? -0.5 : 0.5) +\n            Math.log(v) / Math.log(this.props.step)\n          )\n        )\n    val = Math.max(Math.min(val, this.props.max), this.props.min)\n    if (isNaN(val)) {\n      val = 0\n    }\n    return Math.round(val * 1000) / 1000\n  }\n\n  eventToValue = e => {\n    const bounds = this.canvasRef.getBoundingClientRect()\n    const x = e.clientX - bounds.left\n    const y = e.clientY - bounds.top\n    let a = Math.atan2(x - this.w / 2, this.w / 2 - y) - this.angleOffset\n    if (!this.props.clockwise) {\n      a = this.angleArc - a - 2 * Math.PI\n    }\n    if (this.angleArc !== Math.PI * 2 && a < 0 && a > -0.5) {\n      a = 0\n    } else if (a < 0) {\n      a += Math.PI * 2\n    }\n    const val = !this.props.log\n      ? (a * (this.props.max - this.props.min)) / this.angleArc + this.props.min\n      : Math.pow(this.props.max / this.props.min, a / this.angleArc) *\n        this.props.min\n    return this.coerceToStep(val)\n  }\n\n  handleMouseDown = e => {\n    this.props.onChange(this.eventToValue(e))\n    document.addEventListener(\"mousemove\", this.handleMouseMove)\n    document.addEventListener(\"mouseup\", this.handleMouseUp)\n    document.addEventListener(\"keyup\", this.handleEsc)\n  }\n\n  handleMouseMove = e => {\n    e.preventDefault()\n    this.props.onChange(this.eventToValue(e))\n  }\n\n  handleMouseUp = e => {\n    this.props.onChangeEnd(this.eventToValue(e))\n    document.removeEventListener(\"mousemove\", this.handleMouseMove)\n    document.removeEventListener(\"mouseup\", this.handleMouseUp)\n    document.removeEventListener(\"keyup\", this.handleEsc)\n  }\n\n  handleTouchStart = e => {\n    e.preventDefault()\n    this.touchIndex = e.targetTouches.length - 1\n    this.props.onChange(this.eventToValue(e.targetTouches[this.touchIndex]))\n    document.addEventListener(\"touchmove\", this.handleTouchMove, {\n      passive: false,\n    })\n    document.addEventListener(\"touchend\", this.handleTouchEnd)\n    document.addEventListener(\"touchcancel\", this.handleTouchEnd)\n  }\n\n  handleTouchMove = e => {\n    e.preventDefault()\n    this.props.onChange(this.eventToValue(e.targetTouches[this.touchIndex]))\n  }\n\n  handleTouchEnd = e => {\n    this.props.onChangeEnd(this.eventToValue(e))\n    document.removeEventListener(\"touchmove\", this.handleTouchMove)\n    document.removeEventListener(\"touchend\", this.handleTouchEnd)\n    document.removeEventListener(\"touchcancel\", this.handleTouchEnd)\n  }\n\n  handleEsc = e => {\n    if (e.keyCode === 27) {\n      e.preventDefault()\n      this.handleMouseUp()\n    }\n  }\n\n  handleTextInput = e => {\n    const val =\n      Math.max(Math.min(+e.target.value, this.props.max), this.props.min) ||\n      this.props.min\n    this.props.onChange(val)\n  }\n\n  handleWheel = e => {\n    if (e.deltaX > 0 || e.deltaY > 0) {\n      this.props.onChange(\n        this.coerceToStep(\n          !this.props.log\n            ? this.props.value + this.props.step\n            : this.props.value * this.props.step\n        )\n      )\n    } else if (e.deltaX < 0 || e.deltaY < 0) {\n      this.props.onChange(\n        this.coerceToStep(\n          !this.props.log\n            ? this.props.value - this.props.step\n            : this.props.value / this.props.step\n        )\n      )\n    }\n  }\n\n  handleArrowKey = e => {\n    if (e.keyCode === 37 || e.keyCode === 40) {\n      e.preventDefault()\n      this.props.onChange(\n        this.coerceToStep(\n          !this.props.log\n            ? this.props.value - this.props.step\n            : this.props.value / this.props.step\n        )\n      )\n    } else if (e.keyCode === 38 || e.keyCode === 39) {\n      e.preventDefault()\n      this.props.onChange(\n        this.coerceToStep(\n          !this.props.log\n            ? this.props.value + this.props.step\n            : this.props.value * this.props.step\n        )\n      )\n    }\n  }\n\n  inputStyle = () => ({\n    width: `${(this.w / 2 + 4) >> 0}px`,\n    height: `${(this.w / 3) >> 0}px`,\n    position: \"absolute\",\n    verticalAlign: \"middle\",\n    marginTop: `${(this.w / 3) >> 0}px`,\n    marginLeft: `-${((this.w * 3) / 4 + 2) >> 0}px`,\n    border: 0,\n    background: \"none\",\n    font: `${this.props.fontWeight} ${(this.w / this.digits) >> 0}px ${\n      this.props.font\n    }`,\n    textAlign: \"center\",\n    color: this.props.inputColor || this.props.fgColor,\n    padding: \"0px\",\n    WebkitAppearance: \"none\",\n  })\n\n  drawCanvas() {\n    const ctx = this.canvasRef.getContext(\"2d\")\n    const scale = this.getCanvasScale(ctx)\n    this.canvasRef.width = this.w * scale // clears the canvas\n    this.canvasRef.height = this.h * scale\n    ctx.scale(scale, scale)\n    this.xy = this.w / 2 // coordinates of canvas center\n    this.lineWidth = this.xy * this.props.thickness\n    this.radius = this.xy - this.lineWidth / 2\n    ctx.lineWidth = this.lineWidth\n    ctx.lineCap = this.props.lineCap\n    // background arc\n    ctx.beginPath()\n    ctx.strokeStyle = this.props.bgColor\n    ctx.arc(\n      this.xy,\n      this.xy,\n      this.radius,\n      this.endAngle - 0.00001,\n      this.startAngle + 0.00001,\n      true\n    )\n    ctx.stroke()\n    // foreground arc\n    const a = this.getArcToValue(this.props.value)\n    ctx.beginPath()\n    ctx.strokeStyle = this.props.fgColor\n    ctx.arc(this.xy, this.xy, this.radius, a.startAngle, a.endAngle, a.acw)\n    ctx.stroke()\n  }\n\n  renderCenter = () => {\n    const {\n      displayCustom,\n      displayInput,\n      disableTextInput,\n      readOnly,\n      value,\n    } = this.props\n\n    if (displayInput) {\n      return (\n        <input\n          style={this.inputStyle()}\n          type=\"text\"\n          value={value}\n          onChange={this.handleTextInput}\n          onKeyDown={this.handleArrowKey}\n          readOnly={readOnly || disableTextInput}\n        />\n      )\n    } else if (displayCustom && typeof displayCustom === \"function\") {\n      return displayCustom()\n    }\n    return null\n  }\n\n  render() {\n    const {\n      canvasClassName,\n      className,\n      disableMouseWheel,\n      readOnly,\n      title,\n      value,\n    } = this.props\n\n    return (\n      <div\n        className={className}\n        style={{ width: this.w, height: this.h, display: \"inline-block\" }}\n        onWheel={readOnly || disableMouseWheel ? null : this.handleWheel}\n      >\n        <canvas\n          ref={ref => {\n            this.canvasRef = ref\n          }}\n          className={canvasClassName}\n          style={{ width: \"100%\", height: \"100%\" }}\n          onMouseDown={readOnly ? null : this.handleMouseDown}\n          title={title ? `${title}: ${value}` : value}\n        />\n        {this.renderCenter()}\n      </div>\n    )\n  }\n}\n\nexport default Knob\n"]},"metadata":{},"sourceType":"module"}