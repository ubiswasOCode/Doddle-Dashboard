{"ast":null,"code":"'use strict';\n\nvar hasOwn = require('hasown');\n\nvar newify = require('newify');\n\nvar assign = require('object-assign');\n\nvar EventEmitter = require('events').EventEmitter;\n\nvar inherits = require('./inherits');\n\nvar VALIDATE = require('./validate');\n\nvar objectToString = Object.prototype.toString;\n\nvar isObject = function isObject(value) {\n  return objectToString.apply(value) === '[object Object]';\n};\n\nfunction copyList(source, target, list) {\n  if (source) {\n    list.forEach(function (key) {\n      if (hasOwn(source, key)) {\n        target[key] = source[key];\n      }\n    });\n  }\n\n  return target;\n}\n/**\n * @class Region\n *\n * The Region is an abstraction that allows the developer to refer to rectangles on the screen,\n * and move them around, make diffs and unions, detect intersections, compute areas, etc.\n *\n * ## Creating a region\n *      var region = require('region')({\n *          top  : 10,\n *          left : 10,\n *          bottom: 100,\n *          right : 100\n *      })\n *      //this region is a square, 90x90, starting from (10,10) to (100,100)\n *\n *      var second = require('region')({ top: 10, left: 100, right: 200, bottom: 60})\n *      var union  = region.getUnion(second)\n *\n *      //the \"union\" region is a union between \"region\" and \"second\"\n */\n\n\nvar POINT_POSITIONS = {\n  cy: 'YCenter',\n  cx: 'XCenter',\n  t: 'Top',\n  tc: 'TopCenter',\n  tl: 'TopLeft',\n  tr: 'TopRight',\n  b: 'Bottom',\n  bc: 'BottomCenter',\n  bl: 'BottomLeft',\n  br: 'BottomRight',\n  l: 'Left',\n  lc: 'LeftCenter',\n  r: 'Right',\n  rc: 'RightCenter',\n  c: 'Center'\n};\n/**\n * @constructor\n *\n * Construct a new Region.\n *\n * Example:\n *\n *      var r = new Region({ top: 10, left: 20, bottom: 100, right: 200 })\n *\n *      //or, the same, but with numbers (can be used with new or without)\n *\n *      r = Region(10, 200, 100, 20)\n *\n *      //or, with width and height\n *\n *      r = Region({ top: 10, left: 20, width: 180, height: 90})\n *\n * @param {Number|Object} top The top pixel position, or an object with top, left, bottom, right properties. If an object is passed,\n * instead of having bottom and right, it can have width and height.\n *\n * @param {Number} right The right pixel position\n * @param {Number} bottom The bottom pixel position\n * @param {Number} left The left pixel position\n *\n * @return {Region} this\n */\n\nvar REGION = function REGION(top, right, bottom, left) {\n  if (!(this instanceof REGION)) {\n    return newify(REGION, arguments);\n  }\n\n  EventEmitter.call(this);\n\n  if (isObject(top)) {\n    copyList(top, this, ['top', 'right', 'bottom', 'left']);\n\n    if (top.bottom == null && top.height != null) {\n      this.bottom = this.top + top.height;\n    }\n\n    if (top.right == null && top.width != null) {\n      this.right = this.left + top.width;\n    }\n\n    if (top.emitChangeEvents) {\n      this.emitChangeEvents = top.emitChangeEvents;\n    }\n  } else {\n    this.top = top;\n    this.right = right;\n    this.bottom = bottom;\n    this.left = left;\n  }\n\n  this[0] = this.left;\n  this[1] = this.top;\n  VALIDATE(this);\n};\n\ninherits(REGION, EventEmitter);\nassign(REGION.prototype, {\n  /**\n   * @cfg {Boolean} emitChangeEvents If this is set to true, the region\n   * will emit 'changesize' and 'changeposition' whenever the size or the position changs\n   */\n  emitChangeEvents: false,\n\n  /**\n   * Returns this region, or a clone of this region\n   * @param  {Boolean} [clone] If true, this method will return a clone of this region\n   * @return {Region}       This region, or a clone of this\n   */\n  getRegion: function getRegion(clone) {\n    return clone ? this.clone() : this;\n  },\n\n  /**\n   * Sets the properties of this region to those of the given region\n   * @param {Region/Object} reg The region or object to use for setting properties of this region\n   * @return {Region} this\n   */\n  setRegion: function setRegion(reg) {\n    if (reg instanceof REGION) {\n      this.set(reg.get());\n    } else {\n      this.set(reg);\n    }\n\n    return this;\n  },\n\n  /**\n   * Returns true if this region is valid, false otherwise\n   *\n   * @param  {Region} region The region to check\n   * @return {Boolean}        True, if the region is valid, false otherwise.\n   * A region is valid if\n   *  * left <= right  &&\n   *  * top  <= bottom\n   */\n  validate: function validate() {\n    return REGION.validate(this);\n  },\n  _before: function _before() {\n    if (this.emitChangeEvents) {\n      return copyList(this, {}, ['left', 'top', 'bottom', 'right']);\n    }\n  },\n  _after: function _after(before) {\n    if (this.emitChangeEvents) {\n      if (this.top != before.top || this.left != before.left) {\n        this.emitPositionChange();\n      }\n\n      if (this.right != before.right || this.bottom != before.bottom) {\n        this.emitSizeChange();\n      }\n    }\n  },\n  notifyPositionChange: function notifyPositionChange() {\n    this.emit('changeposition', this);\n  },\n  emitPositionChange: function emitPositionChange() {\n    this.notifyPositionChange();\n  },\n  notifySizeChange: function notifySizeChange() {\n    this.emit('changesize', this);\n  },\n  emitSizeChange: function emitSizeChange() {\n    this.notifySizeChange();\n  },\n\n  /**\n   * Add the given amounts to each specified side. Example\n   *\n   *      region.add({\n   *          top: 50,    //add 50 px to the top side\n   *          bottom: -100    //substract 100 px from the bottom side\n   *      })\n   *\n   * @param {Object} directions\n   * @param {Number} [directions.top]\n   * @param {Number} [directions.left]\n   * @param {Number} [directions.bottom]\n   * @param {Number} [directions.right]\n   *\n   * @return {Region} this\n   */\n  add: function add(directions) {\n    var before = this._before();\n\n    var direction;\n\n    for (direction in directions) {\n      if (hasOwn(directions, direction)) {\n        this[direction] += directions[direction];\n      }\n    }\n\n    this[0] = this.left;\n    this[1] = this.top;\n\n    this._after(before);\n\n    return this;\n  },\n\n  /**\n   * The same as {@link #add}, but substracts the given values\n   * @param {Object} directions\n   * @param {Number} [directions.top]\n   * @param {Number} [directions.left]\n   * @param {Number} [directions.bottom]\n   * @param {Number} [directions.right]\n   *\n   * @return {Region} this\n   */\n  substract: function substract(directions) {\n    var before = this._before();\n\n    var direction;\n\n    for (direction in directions) {\n      if (hasOwn(directions, direction)) {\n        this[direction] -= directions[direction];\n      }\n    }\n\n    this[0] = this.left;\n    this[1] = this.top;\n\n    this._after(before);\n\n    return this;\n  },\n\n  /**\n   * Retrieves the size of the region.\n   * @return {Object} An object with {width, height}, corresponding to the width and height of the region\n   */\n  getSize: function getSize() {\n    return {\n      width: this.width,\n      height: this.height\n    };\n  },\n\n  /**\n   * Move the region to the given position and keeps the region width and height.\n   *\n   * @param {Object} position An object with {top, left} properties. The values in {top,left} are used to move the region by the given amounts.\n   * @param {Number} [position.left]\n   * @param {Number} [position.top]\n   *\n   * @return {Region} this\n   */\n  setPosition: function setPosition(position) {\n    var width = this.width;\n    var height = this.height;\n\n    if (position.left != undefined) {\n      position.right = position.left + width;\n    }\n\n    if (position.top != undefined) {\n      position.bottom = position.top + height;\n    }\n\n    return this.set(position);\n  },\n\n  /**\n   * Sets both the height and the width of this region to the given size.\n   *\n   * @param {Number} size The new size for the region\n   * @return {Region} this\n   */\n  setSize: function setSize(size) {\n    if (size.height != undefined && size.width != undefined) {\n      return this.set({\n        right: this.left + size.width,\n        bottom: this.top + size.height\n      });\n    }\n\n    if (size.width != undefined) {\n      this.setWidth(size.width);\n    }\n\n    if (size.height != undefined) {\n      this.setHeight(size.height);\n    }\n\n    return this;\n  },\n\n  /**\n   * @chainable\n   *\n   * Sets the width of this region\n   * @param {Number} width The new width for this region\n   * @return {Region} this\n   */\n  setWidth: function setWidth(width) {\n    return this.set({\n      right: this.left + width\n    });\n  },\n\n  /**\n   * @chainable\n   *\n   * Sets the height of this region\n   * @param {Number} height The new height for this region\n   * @return {Region} this\n   */\n  setHeight: function setHeight(height) {\n    return this.set({\n      bottom: this.top + height\n    });\n  },\n\n  /**\n   * Sets the given properties on this region\n   *\n   * @param {Object} directions an object containing top, left, and EITHER bottom, right OR width, height\n   * @param {Number} [directions.top]\n   * @param {Number} [directions.left]\n   *\n   * @param {Number} [directions.bottom]\n   * @param {Number} [directions.right]\n   *\n   * @param {Number} [directions.width]\n   * @param {Number} [directions.height]\n   *\n   *\n   * @return {Region} this\n   */\n  set: function set(directions) {\n    var before = this._before();\n\n    copyList(directions, this, ['left', 'top', 'bottom', 'right']);\n\n    if (directions.bottom == null && directions.height != null) {\n      this.bottom = this.top + directions.height;\n    }\n\n    if (directions.right == null && directions.width != null) {\n      this.right = this.left + directions.width;\n    }\n\n    this[0] = this.left;\n    this[1] = this.top;\n\n    this._after(before);\n\n    return this;\n  },\n\n  /**\n   * Retrieves the given property from this region. If no property is given, return an object\n   * with {left, top, right, bottom}\n   *\n   * @param {String} [dir] the property to retrieve from this region\n   * @return {Number/Object}\n   */\n  get: function get(dir) {\n    return dir ? this[dir] : copyList(this, {}, ['left', 'right', 'top', 'bottom']);\n  },\n\n  /**\n   * Shifts this region to either top, or left or both.\n   * Shift is similar to {@link #add} by the fact that it adds the given dimensions to top/left sides, but also adds the given dimensions\n   * to bottom and right\n   *\n   * @param {Object} directions\n   * @param {Number} [directions.top]\n   * @param {Number} [directions.left]\n   *\n   * @return {Region} this\n   */\n  shift: function shift(directions) {\n    var before = this._before();\n\n    if (directions.top) {\n      this.top += directions.top;\n      this.bottom += directions.top;\n    }\n\n    if (directions.left) {\n      this.left += directions.left;\n      this.right += directions.left;\n    }\n\n    this[0] = this.left;\n    this[1] = this.top;\n\n    this._after(before);\n\n    return this;\n  },\n\n  /**\n   * Same as {@link #shift}, but substracts the given values\n   * @chainable\n   *\n   * @param {Object} directions\n   * @param {Number} [directions.top]\n   * @param {Number} [directions.left]\n   *\n   * @return {Region} this\n   */\n  unshift: function unshift(directions) {\n    if (directions.top) {\n      directions.top *= -1;\n    }\n\n    if (directions.left) {\n      directions.left *= -1;\n    }\n\n    return this.shift(directions);\n  },\n\n  /**\n   * Compare this region and the given region. Return true if they have all the same size and position\n   * @param  {Region} region The region to compare with\n   * @return {Boolean}       True if this and region have same size and position\n   */\n  equals: function equals(region) {\n    return this.equalsPosition(region) && this.equalsSize(region);\n  },\n\n  /**\n   * Returns true if this region has the same bottom,right properties as the given region\n   * @param  {Region/Object} size The region to compare against\n   * @return {Boolean}       true if this region is the same size as the given size\n   */\n  equalsSize: function equalsSize(size) {\n    var isInstance = size instanceof REGION;\n    var s = {\n      width: size.width == null && isInstance ? size.getWidth() : size.width,\n      height: size.height == null && isInstance ? size.getHeight() : size.height\n    };\n    return this.getWidth() == s.width && this.getHeight() == s.height;\n  },\n\n  /**\n   * Returns true if this region has the same top,left properties as the given region\n   * @param  {Region} region The region to compare against\n   * @return {Boolean}       true if this.top == region.top and this.left == region.left\n   */\n  equalsPosition: function equalsPosition(region) {\n    return this.top == region.top && this.left == region.left;\n  },\n\n  /**\n   * Adds the given ammount to the left side of this region\n   * @param {Number} left The ammount to add\n   * @return {Region} this\n   */\n  addLeft: function addLeft(left) {\n    var before = this._before();\n\n    this.left = this[0] = this.left + left;\n\n    this._after(before);\n\n    return this;\n  },\n\n  /**\n   * Adds the given ammount to the top side of this region\n   * @param {Number} top The ammount to add\n   * @return {Region} this\n   */\n  addTop: function addTop(top) {\n    var before = this._before();\n\n    this.top = this[1] = this.top + top;\n\n    this._after(before);\n\n    return this;\n  },\n\n  /**\n   * Adds the given ammount to the bottom side of this region\n   * @param {Number} bottom The ammount to add\n   * @return {Region} this\n   */\n  addBottom: function addBottom(bottom) {\n    var before = this._before();\n\n    this.bottom += bottom;\n\n    this._after(before);\n\n    return this;\n  },\n\n  /**\n   * Adds the given ammount to the right side of this region\n   * @param {Number} right The ammount to add\n   * @return {Region} this\n   */\n  addRight: function addRight(right) {\n    var before = this._before();\n\n    this.right += right;\n\n    this._after(before);\n\n    return this;\n  },\n\n  /**\n   * Minimize the top side.\n   * @return {Region} this\n   */\n  minTop: function minTop() {\n    return this.expand({\n      top: 1\n    });\n  },\n\n  /**\n   * Minimize the bottom side.\n   * @return {Region} this\n   */\n  maxBottom: function maxBottom() {\n    return this.expand({\n      bottom: 1\n    });\n  },\n\n  /**\n   * Minimize the left side.\n   * @return {Region} this\n   */\n  minLeft: function minLeft() {\n    return this.expand({\n      left: 1\n    });\n  },\n\n  /**\n   * Maximize the right side.\n   * @return {Region} this\n   */\n  maxRight: function maxRight() {\n    return this.expand({\n      right: 1\n    });\n  },\n\n  /**\n   * Expands this region to the dimensions of the given region, or the document region, if no region is expanded.\n   * But only expand the given sides (any of the four can be expanded).\n   *\n   * @param {Object} directions\n   * @param {Boolean} [directions.top]\n   * @param {Boolean} [directions.bottom]\n   * @param {Boolean} [directions.left]\n   * @param {Boolean} [directions.right]\n   *\n   * @param {Region} [region] the region to expand to, defaults to the document region\n   * @return {Region} this region\n   */\n  expand: function expand(directions, region) {\n    var docRegion = region || REGION.getDocRegion();\n    var list = [];\n    var direction;\n\n    var before = this._before();\n\n    for (direction in directions) {\n      if (hasOwn(directions, direction)) {\n        list.push(direction);\n      }\n    }\n\n    copyList(docRegion, this, list);\n    this[0] = this.left;\n    this[1] = this.top;\n\n    this._after(before);\n\n    return this;\n  },\n\n  /**\n   * Returns a clone of this region\n   * @return {Region} A new region, with the same position and dimension as this region\n   */\n  clone: function clone() {\n    return new REGION({\n      top: this.top,\n      left: this.left,\n      right: this.right,\n      bottom: this.bottom\n    });\n  },\n\n  /**\n   * Returns true if this region contains the given point\n   * @param {Number/Object} x the x coordinate of the point\n   * @param {Number} [y] the y coordinate of the point\n   *\n   * @return {Boolean} true if this region constains the given point, false otherwise\n   */\n  containsPoint: function containsPoint(x, y) {\n    if (arguments.length == 1) {\n      y = x.y;\n      x = x.x;\n    }\n\n    return this.left <= x && x <= this.right && this.top <= y && y <= this.bottom;\n  },\n\n  /**\n   *\n   * @param region\n   *\n   * @return {Boolean} true if this region contains the given region, false otherwise\n   */\n  containsRegion: function containsRegion(region) {\n    return this.containsPoint(region.left, region.top) && this.containsPoint(region.right, region.bottom);\n  },\n\n  /**\n   * Returns an object with the difference for {top, bottom} positions betwen this and the given region,\n   *\n   * See {@link #diff}\n   * @param  {Region} region The region to use for diff\n   * @return {Object}        {top,bottom}\n   */\n  diffHeight: function diffHeight(region) {\n    return this.diff(region, {\n      top: true,\n      bottom: true\n    });\n  },\n\n  /**\n   * Returns an object with the difference for {left, right} positions betwen this and the given region,\n   *\n   * See {@link #diff}\n   * @param  {Region} region The region to use for diff\n   * @return {Object}        {left,right}\n   */\n  diffWidth: function diffWidth(region) {\n    return this.diff(region, {\n      left: true,\n      right: true\n    });\n  },\n\n  /**\n   * Returns an object with the difference in sizes for the given directions, between this and region\n   *\n   * @param  {Region} region     The region to use for diff\n   * @param  {Object} directions An object with the directions to diff. Can have any of the following keys:\n   *  * left\n   *  * right\n   *  * top\n   *  * bottom\n   *\n   * @return {Object} and object with the same keys as the directions object, but the values being the\n   * differences between this region and the given region\n   */\n  diff: function diff(region, directions) {\n    var result = {};\n    var dirName;\n\n    for (dirName in directions) {\n      if (hasOwn(directions, dirName)) {\n        result[dirName] = this[dirName] - region[dirName];\n      }\n    }\n\n    return result;\n  },\n\n  /**\n   * Returns the position, in {left,top} properties, of this region\n   *\n   * @return {Object} {left,top}\n   */\n  getPosition: function getPosition() {\n    return {\n      left: this.left,\n      top: this.top\n    };\n  },\n\n  /**\n   * Returns the point at the given position from this region.\n   *\n   * @param {String} position Any of:\n   *\n   *  * 'cx' - See {@link #getPointXCenter}\n   *  * 'cy' - See {@link #getPointYCenter}\n   *  * 'b'  - See {@link #getPointBottom}\n   *  * 'bc' - See {@link #getPointBottomCenter}\n   *  * 'l'  - See {@link #getPointLeft}F\n   *  * 'lc' - See {@link #getPointLeftCenter}\n   *  * 't'  - See {@link #getPointTop}\n   *  * 'tc' - See {@link #getPointTopCenter}\n   *  * 'r'  - See {@link #getPointRight}\n   *  * 'rc' - See {@link #getPointRightCenter}\n   *  * 'c'  - See {@link #getPointCenter}\n   *  * 'tl' - See {@link #getPointTopLeft}\n   *  * 'bl' - See {@link #getPointBottomLeft}\n   *  * 'br' - See {@link #getPointBottomRight}\n   *  * 'tr' - See {@link #getPointTopRight}\n   *\n   * @param {Boolean} asLeftTop\n   *\n   * @return {Object} either an object with {x,y} or {left,top} if asLeftTop is true\n   */\n  getPoint: function getPoint(position, asLeftTop) {\n    //<debug>\n    if (!POINT_POSITIONS[position]) {\n      console.warn('The position ', position, ' could not be found! Available options are tl, bl, tr, br, l, r, t, b.');\n    } //</debug>\n\n\n    var method = 'getPoint' + POINT_POSITIONS[position],\n        result = this[method]();\n\n    if (asLeftTop) {\n      return {\n        left: result.x,\n        top: result.y\n      };\n    }\n\n    return result;\n  },\n\n  /**\n   * Returns a point with x = null and y being the middle of the left region segment\n   * @return {Object} {x,y}\n   */\n  getPointYCenter: function getPointYCenter() {\n    return {\n      x: null,\n      y: this.top + this.getHeight() / 2\n    };\n  },\n\n  /**\n   * Returns a point with y = null and x being the middle of the top region segment\n   * @return {Object} {x,y}\n   */\n  getPointXCenter: function getPointXCenter() {\n    return {\n      x: this.left + this.getWidth() / 2,\n      y: null\n    };\n  },\n\n  /**\n   * Returns a point with x = null and y the region top position on the y axis\n   * @return {Object} {x,y}\n   */\n  getPointTop: function getPointTop() {\n    return {\n      x: null,\n      y: this.top\n    };\n  },\n\n  /**\n   * Returns a point that is the middle point of the region top segment\n   * @return {Object} {x,y}\n   */\n  getPointTopCenter: function getPointTopCenter() {\n    return {\n      x: this.left + this.getWidth() / 2,\n      y: this.top\n    };\n  },\n\n  /**\n   * Returns a point that is the top-left point of the region\n   * @return {Object} {x,y}\n   */\n  getPointTopLeft: function getPointTopLeft() {\n    return {\n      x: this.left,\n      y: this.top\n    };\n  },\n\n  /**\n   * Returns a point that is the top-right point of the region\n   * @return {Object} {x,y}\n   */\n  getPointTopRight: function getPointTopRight() {\n    return {\n      x: this.right,\n      y: this.top\n    };\n  },\n\n  /**\n   * Returns a point with x = null and y the region bottom position on the y axis\n   * @return {Object} {x,y}\n   */\n  getPointBottom: function getPointBottom() {\n    return {\n      x: null,\n      y: this.bottom\n    };\n  },\n\n  /**\n   * Returns a point that is the middle point of the region bottom segment\n   * @return {Object} {x,y}\n   */\n  getPointBottomCenter: function getPointBottomCenter() {\n    return {\n      x: this.left + this.getWidth() / 2,\n      y: this.bottom\n    };\n  },\n\n  /**\n   * Returns a point that is the bottom-left point of the region\n   * @return {Object} {x,y}\n   */\n  getPointBottomLeft: function getPointBottomLeft() {\n    return {\n      x: this.left,\n      y: this.bottom\n    };\n  },\n\n  /**\n   * Returns a point that is the bottom-right point of the region\n   * @return {Object} {x,y}\n   */\n  getPointBottomRight: function getPointBottomRight() {\n    return {\n      x: this.right,\n      y: this.bottom\n    };\n  },\n\n  /**\n   * Returns a point with y = null and x the region left position on the x axis\n   * @return {Object} {x,y}\n   */\n  getPointLeft: function getPointLeft() {\n    return {\n      x: this.left,\n      y: null\n    };\n  },\n\n  /**\n   * Returns a point that is the middle point of the region left segment\n   * @return {Object} {x,y}\n   */\n  getPointLeftCenter: function getPointLeftCenter() {\n    return {\n      x: this.left,\n      y: this.top + this.getHeight() / 2\n    };\n  },\n\n  /**\n   * Returns a point with y = null and x the region right position on the x axis\n   * @return {Object} {x,y}\n   */\n  getPointRight: function getPointRight() {\n    return {\n      x: this.right,\n      y: null\n    };\n  },\n\n  /**\n   * Returns a point that is the middle point of the region right segment\n   * @return {Object} {x,y}\n   */\n  getPointRightCenter: function getPointRightCenter() {\n    return {\n      x: this.right,\n      y: this.top + this.getHeight() / 2\n    };\n  },\n\n  /**\n   * Returns a point that is the center of the region\n   * @return {Object} {x,y}\n   */\n  getPointCenter: function getPointCenter() {\n    return {\n      x: this.left + this.getWidth() / 2,\n      y: this.top + this.getHeight() / 2\n    };\n  },\n\n  /**\n   * @return {Number} returns the height of the region\n   */\n  getHeight: function getHeight() {\n    return this.bottom - this.top;\n  },\n\n  /**\n   * @return {Number} returns the width of the region\n   */\n  getWidth: function getWidth() {\n    return this.right - this.left;\n  },\n\n  /**\n   * @return {Number} returns the top property of the region\n   */\n  getTop: function getTop() {\n    return this.top;\n  },\n\n  /**\n   * @return {Number} returns the left property of the region\n   */\n  getLeft: function getLeft() {\n    return this.left;\n  },\n\n  /**\n   * @return {Number} returns the bottom property of the region\n   */\n  getBottom: function getBottom() {\n    return this.bottom;\n  },\n\n  /**\n   * @return {Number} returns the right property of the region\n   */\n  getRight: function getRight() {\n    return this.right;\n  },\n\n  /**\n   * Returns the area of the region\n   * @return {Number} the computed area\n   */\n  getArea: function getArea() {\n    return this.getWidth() * this.getHeight();\n  },\n  constrainTo: function constrainTo(contrain) {\n    var intersect = this.getIntersection(contrain);\n    var shift;\n\n    if (!intersect || !intersect.equals(this)) {\n      var contrainWidth = contrain.getWidth(),\n          contrainHeight = contrain.getHeight();\n\n      if (this.getWidth() > contrainWidth) {\n        this.left = contrain.left;\n        this.setWidth(contrainWidth);\n      }\n\n      if (this.getHeight() > contrainHeight) {\n        this.top = contrain.top;\n        this.setHeight(contrainHeight);\n      }\n\n      shift = {};\n\n      if (this.right > contrain.right) {\n        shift.left = contrain.right - this.right;\n      }\n\n      if (this.bottom > contrain.bottom) {\n        shift.top = contrain.bottom - this.bottom;\n      }\n\n      if (this.left < contrain.left) {\n        shift.left = contrain.left - this.left;\n      }\n\n      if (this.top < contrain.top) {\n        shift.top = contrain.top - this.top;\n      }\n\n      this.shift(shift);\n      return true;\n    }\n\n    return false;\n  },\n  __IS_REGION: true\n  /**\n   * @property {Number} top\n   */\n\n  /**\n   * @property {Number} right\n   */\n\n  /**\n   * @property {Number} bottom\n   */\n\n  /**\n   * @property {Number} left\n   */\n\n  /**\n   * @property {Number} [0] the top property\n   */\n\n  /**\n   * @property {Number} [1] the left property\n   */\n\n  /**\n   * @method getIntersection\n   * Returns a region that is the intersection of this region and the given region\n   * @param  {Region} region The region to intersect with\n   * @return {Region}        The intersection region\n   */\n\n  /**\n   * @method getUnion\n   * Returns a region that is the union of this region with the given region\n   * @param  {Region} region  The region to make union with\n   * @return {Region}        The union region. The smallest region that contains both this and the given region.\n   */\n\n});\nObject.defineProperties(REGION.prototype, {\n  width: {\n    get: function get() {\n      return this.getWidth();\n    },\n    set: function set(width) {\n      return this.setWidth(width);\n    }\n  },\n  height: {\n    get: function get() {\n      return this.getHeight();\n    },\n    set: function set(height) {\n      return this.setHeight(height);\n    }\n  }\n});\n\nrequire('./statics')(REGION);\n\nmodule.exports = REGION;","map":{"version":3,"sources":["/home/ocode/Downloads/Admin/node_modules/region/src/index.js"],"names":["hasOwn","require","newify","assign","EventEmitter","inherits","VALIDATE","objectToString","Object","prototype","toString","isObject","value","apply","copyList","source","target","list","forEach","key","POINT_POSITIONS","cy","cx","t","tc","tl","tr","b","bc","bl","br","l","lc","r","rc","c","REGION","top","right","bottom","left","arguments","call","height","width","emitChangeEvents","getRegion","clone","setRegion","reg","set","get","validate","_before","_after","before","emitPositionChange","emitSizeChange","notifyPositionChange","emit","notifySizeChange","add","directions","direction","substract","getSize","setPosition","position","undefined","setSize","size","setWidth","setHeight","dir","shift","unshift","equals","region","equalsPosition","equalsSize","isInstance","s","getWidth","getHeight","addLeft","addTop","addBottom","addRight","minTop","expand","maxBottom","minLeft","maxRight","docRegion","getDocRegion","push","containsPoint","x","y","length","containsRegion","diffHeight","diff","diffWidth","result","dirName","getPosition","getPoint","asLeftTop","console","warn","method","getPointYCenter","getPointXCenter","getPointTop","getPointTopCenter","getPointTopLeft","getPointTopRight","getPointBottom","getPointBottomCenter","getPointBottomLeft","getPointBottomRight","getPointLeft","getPointLeftCenter","getPointRight","getPointRightCenter","getPointCenter","getTop","getLeft","getBottom","getRight","getArea","constrainTo","contrain","intersect","getIntersection","contrainWidth","contrainHeight","__IS_REGION","defineProperties","module","exports"],"mappings":"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","sourcesContent":["'use strict';\n\nvar hasOwn    = require('hasown')\nvar newify    = require('newify')\n\nvar assign      = require('object-assign');\nvar EventEmitter = require('events').EventEmitter\n\nvar inherits = require('./inherits')\nvar VALIDATE = require('./validate')\n\nvar objectToString = Object.prototype.toString\n\nvar isObject = function(value){\n    return objectToString.apply(value) === '[object Object]'\n}\n\nfunction copyList(source, target, list){\n    if (source){\n        list.forEach(function(key){\n            if (hasOwn(source, key)){\n                target[key] = source[key]\n            }\n        })\n    }\n\n    return target\n}\n\n/**\n * @class Region\n *\n * The Region is an abstraction that allows the developer to refer to rectangles on the screen,\n * and move them around, make diffs and unions, detect intersections, compute areas, etc.\n *\n * ## Creating a region\n *      var region = require('region')({\n *          top  : 10,\n *          left : 10,\n *          bottom: 100,\n *          right : 100\n *      })\n *      //this region is a square, 90x90, starting from (10,10) to (100,100)\n *\n *      var second = require('region')({ top: 10, left: 100, right: 200, bottom: 60})\n *      var union  = region.getUnion(second)\n *\n *      //the \"union\" region is a union between \"region\" and \"second\"\n */\n\nvar POINT_POSITIONS = {\n        cy: 'YCenter',\n        cx: 'XCenter',\n        t : 'Top',\n        tc: 'TopCenter',\n        tl: 'TopLeft',\n        tr: 'TopRight',\n        b : 'Bottom',\n        bc: 'BottomCenter',\n        bl: 'BottomLeft',\n        br: 'BottomRight',\n        l : 'Left',\n        lc: 'LeftCenter',\n        r : 'Right',\n        rc: 'RightCenter',\n        c : 'Center'\n    }\n\n/**\n * @constructor\n *\n * Construct a new Region.\n *\n * Example:\n *\n *      var r = new Region({ top: 10, left: 20, bottom: 100, right: 200 })\n *\n *      //or, the same, but with numbers (can be used with new or without)\n *\n *      r = Region(10, 200, 100, 20)\n *\n *      //or, with width and height\n *\n *      r = Region({ top: 10, left: 20, width: 180, height: 90})\n *\n * @param {Number|Object} top The top pixel position, or an object with top, left, bottom, right properties. If an object is passed,\n * instead of having bottom and right, it can have width and height.\n *\n * @param {Number} right The right pixel position\n * @param {Number} bottom The bottom pixel position\n * @param {Number} left The left pixel position\n *\n * @return {Region} this\n */\nvar REGION = function(top, right, bottom, left){\n\n    if (!(this instanceof REGION)){\n        return newify(REGION, arguments)\n    }\n\n    EventEmitter.call(this)\n\n    if (isObject(top)){\n        copyList(top, this, ['top','right','bottom','left'])\n\n        if (top.bottom == null && top.height != null){\n            this.bottom = this.top + top.height\n        }\n        if (top.right == null && top.width != null){\n            this.right = this.left + top.width\n        }\n\n        if (top.emitChangeEvents){\n            this.emitChangeEvents = top.emitChangeEvents\n        }\n    } else {\n        this.top    = top\n        this.right  = right\n        this.bottom = bottom\n        this.left   = left\n    }\n\n    this[0] = this.left\n    this[1] = this.top\n\n    VALIDATE(this)\n}\n\ninherits(REGION, EventEmitter)\n\nassign(REGION.prototype, {\n\n    /**\n     * @cfg {Boolean} emitChangeEvents If this is set to true, the region\n     * will emit 'changesize' and 'changeposition' whenever the size or the position changs\n     */\n    emitChangeEvents: false,\n\n    /**\n     * Returns this region, or a clone of this region\n     * @param  {Boolean} [clone] If true, this method will return a clone of this region\n     * @return {Region}       This region, or a clone of this\n     */\n    getRegion: function(clone){\n        return clone?\n                    this.clone():\n                    this\n    },\n\n    /**\n     * Sets the properties of this region to those of the given region\n     * @param {Region/Object} reg The region or object to use for setting properties of this region\n     * @return {Region} this\n     */\n    setRegion: function(reg){\n\n        if (reg instanceof REGION){\n            this.set(reg.get())\n        } else {\n            this.set(reg)\n        }\n\n        return this\n    },\n\n    /**\n     * Returns true if this region is valid, false otherwise\n     *\n     * @param  {Region} region The region to check\n     * @return {Boolean}        True, if the region is valid, false otherwise.\n     * A region is valid if\n     *  * left <= right  &&\n     *  * top  <= bottom\n     */\n    validate: function(){\n        return REGION.validate(this)\n    },\n\n    _before: function(){\n        if (this.emitChangeEvents){\n            return copyList(this, {}, ['left','top','bottom','right'])\n        }\n    },\n\n    _after: function(before){\n        if (this.emitChangeEvents){\n\n            if(this.top != before.top || this.left != before.left) {\n                this.emitPositionChange()\n            }\n\n            if(this.right != before.right || this.bottom != before.bottom) {\n                this.emitSizeChange()\n            }\n        }\n    },\n\n    notifyPositionChange: function(){\n        this.emit('changeposition', this)\n    },\n\n    emitPositionChange: function(){\n        this.notifyPositionChange()\n    },\n\n    notifySizeChange: function(){\n        this.emit('changesize', this)\n    },\n\n    emitSizeChange: function(){\n        this.notifySizeChange()\n    },\n\n    /**\n     * Add the given amounts to each specified side. Example\n     *\n     *      region.add({\n     *          top: 50,    //add 50 px to the top side\n     *          bottom: -100    //substract 100 px from the bottom side\n     *      })\n     *\n     * @param {Object} directions\n     * @param {Number} [directions.top]\n     * @param {Number} [directions.left]\n     * @param {Number} [directions.bottom]\n     * @param {Number} [directions.right]\n     *\n     * @return {Region} this\n     */\n    add: function(directions){\n\n        var before = this._before()\n        var direction\n\n        for (direction in directions) if ( hasOwn(directions, direction) ) {\n            this[direction] += directions[direction]\n        }\n\n        this[0] = this.left\n        this[1] = this.top\n\n        this._after(before)\n\n        return this\n    },\n\n    /**\n     * The same as {@link #add}, but substracts the given values\n     * @param {Object} directions\n     * @param {Number} [directions.top]\n     * @param {Number} [directions.left]\n     * @param {Number} [directions.bottom]\n     * @param {Number} [directions.right]\n     *\n     * @return {Region} this\n     */\n    substract: function(directions){\n\n        var before = this._before()\n        var direction\n\n        for (direction in directions) if (hasOwn(directions, direction) ) {\n            this[direction] -= directions[direction]\n        }\n\n        this[0] = this.left\n        this[1] = this.top\n\n        this._after(before)\n\n        return this\n    },\n\n    /**\n     * Retrieves the size of the region.\n     * @return {Object} An object with {width, height}, corresponding to the width and height of the region\n     */\n    getSize: function(){\n        return {\n            width  : this.width,\n            height : this.height\n        }\n    },\n\n    /**\n     * Move the region to the given position and keeps the region width and height.\n     *\n     * @param {Object} position An object with {top, left} properties. The values in {top,left} are used to move the region by the given amounts.\n     * @param {Number} [position.left]\n     * @param {Number} [position.top]\n     *\n     * @return {Region} this\n     */\n    setPosition: function(position){\n        var width  = this.width\n        var height = this.height\n\n        if (position.left != undefined){\n            position.right  = position.left + width\n        }\n\n        if (position.top != undefined){\n            position.bottom = position.top  + height\n        }\n\n        return this.set(position)\n    },\n\n    /**\n     * Sets both the height and the width of this region to the given size.\n     *\n     * @param {Number} size The new size for the region\n     * @return {Region} this\n     */\n    setSize: function(size){\n        if (size.height != undefined && size.width != undefined){\n            return this.set({\n                right  : this.left + size.width,\n                bottom : this.top  + size.height\n            })\n        }\n\n        if (size.width != undefined){\n            this.setWidth(size.width)\n        }\n\n        if (size.height != undefined){\n            this.setHeight(size.height)\n        }\n\n        return this\n    },\n\n\n\n    /**\n     * @chainable\n     *\n     * Sets the width of this region\n     * @param {Number} width The new width for this region\n     * @return {Region} this\n     */\n    setWidth: function(width){\n        return this.set({\n            right: this.left + width\n        })\n    },\n\n    /**\n     * @chainable\n     *\n     * Sets the height of this region\n     * @param {Number} height The new height for this region\n     * @return {Region} this\n     */\n    setHeight: function(height){\n        return this.set({\n            bottom: this.top + height\n        })\n    },\n\n    /**\n     * Sets the given properties on this region\n     *\n     * @param {Object} directions an object containing top, left, and EITHER bottom, right OR width, height\n     * @param {Number} [directions.top]\n     * @param {Number} [directions.left]\n     *\n     * @param {Number} [directions.bottom]\n     * @param {Number} [directions.right]\n     *\n     * @param {Number} [directions.width]\n     * @param {Number} [directions.height]\n     *\n     *\n     * @return {Region} this\n     */\n    set: function(directions){\n        var before = this._before()\n\n        copyList(directions, this, ['left','top','bottom','right'])\n\n        if (directions.bottom == null && directions.height != null){\n            this.bottom = this.top + directions.height\n        }\n        if (directions.right == null && directions.width != null){\n            this.right = this.left + directions.width\n        }\n\n        this[0] = this.left\n        this[1] = this.top\n\n        this._after(before)\n\n        return this\n    },\n\n    /**\n     * Retrieves the given property from this region. If no property is given, return an object\n     * with {left, top, right, bottom}\n     *\n     * @param {String} [dir] the property to retrieve from this region\n     * @return {Number/Object}\n     */\n    get: function(dir){\n        return dir? this[dir]:\n                    copyList(this, {}, ['left','right','top','bottom'])\n    },\n\n    /**\n     * Shifts this region to either top, or left or both.\n     * Shift is similar to {@link #add} by the fact that it adds the given dimensions to top/left sides, but also adds the given dimensions\n     * to bottom and right\n     *\n     * @param {Object} directions\n     * @param {Number} [directions.top]\n     * @param {Number} [directions.left]\n     *\n     * @return {Region} this\n     */\n    shift: function(directions){\n\n        var before = this._before()\n\n        if (directions.top){\n            this.top    += directions.top\n            this.bottom += directions.top\n        }\n\n        if (directions.left){\n            this.left  += directions.left\n            this.right += directions.left\n        }\n\n        this[0] = this.left\n        this[1] = this.top\n\n        this._after(before)\n\n        return this\n    },\n\n    /**\n     * Same as {@link #shift}, but substracts the given values\n     * @chainable\n     *\n     * @param {Object} directions\n     * @param {Number} [directions.top]\n     * @param {Number} [directions.left]\n     *\n     * @return {Region} this\n     */\n    unshift: function(directions){\n\n        if (directions.top){\n            directions.top *= -1\n        }\n\n        if (directions.left){\n            directions.left *= -1\n        }\n\n        return this.shift(directions)\n    },\n\n    /**\n     * Compare this region and the given region. Return true if they have all the same size and position\n     * @param  {Region} region The region to compare with\n     * @return {Boolean}       True if this and region have same size and position\n     */\n    equals: function(region){\n        return this.equalsPosition(region) && this.equalsSize(region)\n    },\n\n    /**\n     * Returns true if this region has the same bottom,right properties as the given region\n     * @param  {Region/Object} size The region to compare against\n     * @return {Boolean}       true if this region is the same size as the given size\n     */\n    equalsSize: function(size){\n        var isInstance = size instanceof REGION\n\n        var s = {\n            width: size.width == null && isInstance?\n                    size.getWidth():\n                    size.width,\n\n            height: size.height == null && isInstance?\n                    size.getHeight():\n                    size.height\n        }\n        return this.getWidth() == s.width && this.getHeight() == s.height\n    },\n\n    /**\n     * Returns true if this region has the same top,left properties as the given region\n     * @param  {Region} region The region to compare against\n     * @return {Boolean}       true if this.top == region.top and this.left == region.left\n     */\n    equalsPosition: function(region){\n        return this.top == region.top && this.left == region.left\n    },\n\n    /**\n     * Adds the given ammount to the left side of this region\n     * @param {Number} left The ammount to add\n     * @return {Region} this\n     */\n    addLeft: function(left){\n        var before = this._before()\n\n        this.left = this[0] = this.left + left\n\n        this._after(before)\n\n        return this\n    },\n\n    /**\n     * Adds the given ammount to the top side of this region\n     * @param {Number} top The ammount to add\n     * @return {Region} this\n     */\n    addTop: function(top){\n        var before = this._before()\n\n        this.top = this[1] = this.top + top\n\n        this._after(before)\n\n        return this\n    },\n\n    /**\n     * Adds the given ammount to the bottom side of this region\n     * @param {Number} bottom The ammount to add\n     * @return {Region} this\n     */\n    addBottom: function(bottom){\n        var before = this._before()\n\n        this.bottom += bottom\n\n        this._after(before)\n\n        return this\n    },\n\n    /**\n     * Adds the given ammount to the right side of this region\n     * @param {Number} right The ammount to add\n     * @return {Region} this\n     */\n    addRight: function(right){\n        var before = this._before()\n\n        this.right += right\n\n        this._after(before)\n\n        return this\n    },\n\n    /**\n     * Minimize the top side.\n     * @return {Region} this\n     */\n    minTop: function(){\n        return this.expand({top: 1})\n    },\n    /**\n     * Minimize the bottom side.\n     * @return {Region} this\n     */\n    maxBottom: function(){\n        return this.expand({bottom: 1})\n    },\n    /**\n     * Minimize the left side.\n     * @return {Region} this\n     */\n    minLeft: function(){\n        return this.expand({left: 1})\n    },\n    /**\n     * Maximize the right side.\n     * @return {Region} this\n     */\n    maxRight: function(){\n        return this.expand({right: 1})\n    },\n\n    /**\n     * Expands this region to the dimensions of the given region, or the document region, if no region is expanded.\n     * But only expand the given sides (any of the four can be expanded).\n     *\n     * @param {Object} directions\n     * @param {Boolean} [directions.top]\n     * @param {Boolean} [directions.bottom]\n     * @param {Boolean} [directions.left]\n     * @param {Boolean} [directions.right]\n     *\n     * @param {Region} [region] the region to expand to, defaults to the document region\n     * @return {Region} this region\n     */\n    expand: function(directions, region){\n        var docRegion = region || REGION.getDocRegion()\n        var list      = []\n        var direction\n        var before = this._before()\n\n        for (direction in directions) if ( hasOwn(directions, direction) ) {\n            list.push(direction)\n        }\n\n        copyList(docRegion, this, list)\n\n        this[0] = this.left\n        this[1] = this.top\n\n        this._after(before)\n\n        return this\n    },\n\n    /**\n     * Returns a clone of this region\n     * @return {Region} A new region, with the same position and dimension as this region\n     */\n    clone: function(){\n        return new REGION({\n                    top    : this.top,\n                    left   : this.left,\n                    right  : this.right,\n                    bottom : this.bottom\n                })\n    },\n\n    /**\n     * Returns true if this region contains the given point\n     * @param {Number/Object} x the x coordinate of the point\n     * @param {Number} [y] the y coordinate of the point\n     *\n     * @return {Boolean} true if this region constains the given point, false otherwise\n     */\n    containsPoint: function(x, y){\n        if (arguments.length == 1){\n            y = x.y\n            x = x.x\n        }\n\n        return this.left <= x  &&\n               x <= this.right &&\n               this.top <= y   &&\n               y <= this.bottom\n    },\n\n    /**\n     *\n     * @param region\n     *\n     * @return {Boolean} true if this region contains the given region, false otherwise\n     */\n    containsRegion: function(region){\n        return this.containsPoint(region.left, region.top)    &&\n               this.containsPoint(region.right, region.bottom)\n    },\n\n    /**\n     * Returns an object with the difference for {top, bottom} positions betwen this and the given region,\n     *\n     * See {@link #diff}\n     * @param  {Region} region The region to use for diff\n     * @return {Object}        {top,bottom}\n     */\n    diffHeight: function(region){\n        return this.diff(region, {top: true, bottom: true})\n    },\n\n    /**\n     * Returns an object with the difference for {left, right} positions betwen this and the given region,\n     *\n     * See {@link #diff}\n     * @param  {Region} region The region to use for diff\n     * @return {Object}        {left,right}\n     */\n    diffWidth: function(region){\n        return this.diff(region, {left: true, right: true})\n    },\n\n    /**\n     * Returns an object with the difference in sizes for the given directions, between this and region\n     *\n     * @param  {Region} region     The region to use for diff\n     * @param  {Object} directions An object with the directions to diff. Can have any of the following keys:\n     *  * left\n     *  * right\n     *  * top\n     *  * bottom\n     *\n     * @return {Object} and object with the same keys as the directions object, but the values being the\n     * differences between this region and the given region\n     */\n    diff: function(region, directions){\n        var result = {}\n        var dirName\n\n        for (dirName in directions) if ( hasOwn(directions, dirName) ) {\n            result[dirName] = this[dirName] - region[dirName]\n        }\n\n        return result\n    },\n\n    /**\n     * Returns the position, in {left,top} properties, of this region\n     *\n     * @return {Object} {left,top}\n     */\n    getPosition: function(){\n        return {\n            left: this.left,\n            top : this.top\n        }\n    },\n\n    /**\n     * Returns the point at the given position from this region.\n     *\n     * @param {String} position Any of:\n     *\n     *  * 'cx' - See {@link #getPointXCenter}\n     *  * 'cy' - See {@link #getPointYCenter}\n     *  * 'b'  - See {@link #getPointBottom}\n     *  * 'bc' - See {@link #getPointBottomCenter}\n     *  * 'l'  - See {@link #getPointLeft}F\n     *  * 'lc' - See {@link #getPointLeftCenter}\n     *  * 't'  - See {@link #getPointTop}\n     *  * 'tc' - See {@link #getPointTopCenter}\n     *  * 'r'  - See {@link #getPointRight}\n     *  * 'rc' - See {@link #getPointRightCenter}\n     *  * 'c'  - See {@link #getPointCenter}\n     *  * 'tl' - See {@link #getPointTopLeft}\n     *  * 'bl' - See {@link #getPointBottomLeft}\n     *  * 'br' - See {@link #getPointBottomRight}\n     *  * 'tr' - See {@link #getPointTopRight}\n     *\n     * @param {Boolean} asLeftTop\n     *\n     * @return {Object} either an object with {x,y} or {left,top} if asLeftTop is true\n     */\n    getPoint: function(position, asLeftTop){\n\n        //<debug>\n        if (!POINT_POSITIONS[position]) {\n            console.warn('The position ', position, ' could not be found! Available options are tl, bl, tr, br, l, r, t, b.');\n        }\n        //</debug>\n\n        var method = 'getPoint' + POINT_POSITIONS[position],\n            result = this[method]()\n\n        if (asLeftTop){\n            return {\n                left : result.x,\n                top  : result.y\n            }\n        }\n\n        return result\n    },\n\n    /**\n     * Returns a point with x = null and y being the middle of the left region segment\n     * @return {Object} {x,y}\n     */\n    getPointYCenter: function(){\n        return { x: null, y: this.top + this.getHeight() / 2 }\n    },\n\n    /**\n     * Returns a point with y = null and x being the middle of the top region segment\n     * @return {Object} {x,y}\n     */\n    getPointXCenter: function(){\n        return { x: this.left + this.getWidth() / 2, y: null }\n    },\n\n    /**\n     * Returns a point with x = null and y the region top position on the y axis\n     * @return {Object} {x,y}\n     */\n    getPointTop: function(){\n        return { x: null, y: this.top }\n    },\n\n    /**\n     * Returns a point that is the middle point of the region top segment\n     * @return {Object} {x,y}\n     */\n    getPointTopCenter: function(){\n        return { x: this.left + this.getWidth() / 2, y: this.top }\n    },\n\n    /**\n     * Returns a point that is the top-left point of the region\n     * @return {Object} {x,y}\n     */\n    getPointTopLeft: function(){\n        return { x: this.left, y: this.top}\n    },\n\n    /**\n     * Returns a point that is the top-right point of the region\n     * @return {Object} {x,y}\n     */\n    getPointTopRight: function(){\n        return { x: this.right, y: this.top}\n    },\n\n    /**\n     * Returns a point with x = null and y the region bottom position on the y axis\n     * @return {Object} {x,y}\n     */\n    getPointBottom: function(){\n        return { x: null, y: this.bottom }\n    },\n\n    /**\n     * Returns a point that is the middle point of the region bottom segment\n     * @return {Object} {x,y}\n     */\n    getPointBottomCenter: function(){\n        return { x: this.left + this.getWidth() / 2, y: this.bottom }\n    },\n\n    /**\n     * Returns a point that is the bottom-left point of the region\n     * @return {Object} {x,y}\n     */\n    getPointBottomLeft: function(){\n        return { x: this.left, y: this.bottom}\n    },\n\n    /**\n     * Returns a point that is the bottom-right point of the region\n     * @return {Object} {x,y}\n     */\n    getPointBottomRight: function(){\n        return { x: this.right, y: this.bottom}\n    },\n\n    /**\n     * Returns a point with y = null and x the region left position on the x axis\n     * @return {Object} {x,y}\n     */\n    getPointLeft: function(){\n        return { x: this.left, y: null }\n    },\n\n    /**\n     * Returns a point that is the middle point of the region left segment\n     * @return {Object} {x,y}\n     */\n    getPointLeftCenter: function(){\n        return { x: this.left, y: this.top + this.getHeight() / 2 }\n    },\n\n    /**\n     * Returns a point with y = null and x the region right position on the x axis\n     * @return {Object} {x,y}\n     */\n    getPointRight: function(){\n        return { x: this.right, y: null }\n    },\n\n    /**\n     * Returns a point that is the middle point of the region right segment\n     * @return {Object} {x,y}\n     */\n    getPointRightCenter: function(){\n        return { x: this.right, y: this.top + this.getHeight() / 2 }\n    },\n\n    /**\n     * Returns a point that is the center of the region\n     * @return {Object} {x,y}\n     */\n    getPointCenter: function(){\n        return { x: this.left + this.getWidth() / 2, y: this.top + this.getHeight() / 2 }\n    },\n\n    /**\n     * @return {Number} returns the height of the region\n     */\n    getHeight: function(){\n        return this.bottom - this.top\n    },\n\n    /**\n     * @return {Number} returns the width of the region\n     */\n    getWidth: function(){\n        return this.right - this.left\n    },\n\n    /**\n     * @return {Number} returns the top property of the region\n     */\n    getTop: function(){\n        return this.top\n    },\n\n    /**\n     * @return {Number} returns the left property of the region\n     */\n    getLeft: function(){\n        return this.left\n    },\n\n    /**\n     * @return {Number} returns the bottom property of the region\n     */\n    getBottom: function(){\n        return this.bottom\n    },\n\n    /**\n     * @return {Number} returns the right property of the region\n     */\n    getRight: function(){\n        return this.right\n    },\n\n    /**\n     * Returns the area of the region\n     * @return {Number} the computed area\n     */\n    getArea: function(){\n        return this.getWidth() * this.getHeight()\n    },\n\n    constrainTo: function(contrain){\n        var intersect = this.getIntersection(contrain)\n        var shift\n\n        if (!intersect || !intersect.equals(this)){\n\n            var contrainWidth  = contrain.getWidth(),\n                contrainHeight = contrain.getHeight()\n\n            if (this.getWidth() > contrainWidth){\n                this.left = contrain.left\n                this.setWidth(contrainWidth)\n            }\n\n            if (this.getHeight() > contrainHeight){\n                this.top = contrain.top\n                this.setHeight(contrainHeight)\n            }\n\n            shift = {}\n\n            if (this.right > contrain.right){\n                shift.left = contrain.right - this.right\n            }\n\n            if (this.bottom > contrain.bottom){\n                shift.top = contrain.bottom - this.bottom\n            }\n\n            if (this.left < contrain.left){\n                shift.left = contrain.left - this.left\n            }\n\n            if (this.top < contrain.top){\n                shift.top = contrain.top - this.top\n            }\n\n            this.shift(shift)\n\n            return true\n        }\n\n        return false\n    },\n\n    __IS_REGION: true\n\n    /**\n     * @property {Number} top\n     */\n\n    /**\n     * @property {Number} right\n     */\n\n    /**\n     * @property {Number} bottom\n     */\n\n    /**\n     * @property {Number} left\n     */\n\n    /**\n     * @property {Number} [0] the top property\n     */\n\n    /**\n     * @property {Number} [1] the left property\n     */\n\n    /**\n     * @method getIntersection\n     * Returns a region that is the intersection of this region and the given region\n     * @param  {Region} region The region to intersect with\n     * @return {Region}        The intersection region\n     */\n\n    /**\n     * @method getUnion\n     * Returns a region that is the union of this region with the given region\n     * @param  {Region} region  The region to make union with\n     * @return {Region}        The union region. The smallest region that contains both this and the given region.\n     */\n\n})\n\nObject.defineProperties(REGION.prototype, {\n    width: {\n        get: function(){\n            return this.getWidth()\n        },\n        set: function(width){\n            return this.setWidth(width)\n        }\n    },\n    height: {\n        get: function(){\n            return this.getHeight()\n        },\n        set: function(height){\n            return this.setHeight(height)\n        }\n    }\n})\n\nrequire('./statics')(REGION)\n\nmodule.exports = REGION"]},"metadata":{},"sourceType":"script"}